{"model_name_or_path": "agentless", "instance_id": "matplotlib__matplotlib-18869", "model_patch": "diff --git a/lib/matplotlib/__init__.py b/lib/matplotlib/__init__.py\nindex 320d1a7..b1c4d83 100644\n--- a/lib/matplotlib/__init__.py\n+++ b/lib/matplotlib/__init__.py\n@@ -131,7 +131,27 @@ __bibtex__ = r\"\"\"@Article{Hunter:2007,\n \n \n def __getattr__(name):\n-    if name == \"__version__\":\n+    if name == \"__version__\" or name == \"version_info\":\n+        import setuptools_scm\n+        global __version__, version_info  # cache them.\n+        # Only shell out to a git subprocess if really needed, and not on a\n+        # shallow clone, such as those used by CI, as the latter would trigger\n+        # a warning from setuptools_scm.\n+        root = Path(__file__).resolve().parents[2]\n+        if (root / \".git\").exists() and not (root / \".git/shallow\").exists():\n+            __version__ = setuptools_scm.get_version(\n+                root=root,\n+                version_scheme=\"post-release\",\n+                local_scheme=\"node-and-date\",\n+                fallback_version=_version.version,\n+            )\n+        else:  # Get the version from the _version.py setuptools_scm file.\n+            __version__ = _version.version\n+        version_info = tuple(map(int, __version__.split(\".\")))  # create version_info\n+        if name == \"__version__\":\n+            return __version__\n+        elif name == \"version_info\":\n+            return version_info\n         import setuptools_scm\n         global __version__  # cache it.\n         # Only shell out to a git subprocess if really needed, and not on a\n", "occurrence": 1, "normalized_patch": "diff --git a/lib/matplotlib/__init__.py b/lib/matplotlib/__init__.py\nindex 4b4b135..84bf295 100644\n--- a/lib/matplotlib/__init__.py\n+++ b/lib/matplotlib/__init__.py\n@@ -26,7 +26,19 @@ from matplotlib.rcsetup import validate_backend, cycler\n _log = logging.getLogger(__name__)\n __bibtex__ = '@Article{Hunter:2007,\\n  Author    = {Hunter, J. D.},\\n  Title     = {Matplotlib: A 2D graphics environment},\\n  Journal   = {Computing in Science \\\\& Engineering},\\n  Volume    = {9},\\n  Number    = {3},\\n  Pages     = {90--95},\\n  abstract  = {Matplotlib is a 2D graphics package used for Python\\n  for application development, interactive scripting, and\\n  publication-quality image generation across user\\n  interfaces and operating systems.},\\n  publisher = {IEEE COMPUTER SOC},\\n  year      = 2007\\n}'\n def __getattr__(name):\n-    if name == '__version__':\n+    if name == '__version__' or name == 'version_info':\n+        import setuptools_scm\n+        global __version__, version_info\n+        root = Path(__file__).resolve().parents[2]\n+        if (root / '.git').exists() and (not (root / '.git/shallow').exists()):\n+            __version__ = setuptools_scm.get_version(root=root, version_scheme='post-release', local_scheme='node-and-date', fallback_version=_version.version)\n+        else:\n+            __version__ = _version.version\n+        version_info = tuple(map(int, __version__.split('.')))\n+        if name == '__version__':\n+            return __version__\n+        elif name == 'version_info':\n+            return version_info\n         import setuptools_scm\n         global __version__\n         root = Path(__file__).resolve().parents[2]\n", "normalized_occurrence": 1}
