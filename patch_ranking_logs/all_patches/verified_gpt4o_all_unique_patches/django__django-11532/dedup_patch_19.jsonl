{"model_name_or_path": "agentless", "instance_id": "django__django-11532", "model_patch": "diff --git a/django/core/mail/message.py b/django/core/mail/message.py\nindex e5469be..fda5427 100644\n--- a/django/core/mail/message.py\n+++ b/django/core/mail/message.py\n@@ -63,8 +63,11 @@ def forbid_multi_line_headers(name, val, encoding):\n     except UnicodeEncodeError:\n         if name.lower() in ADDRESS_HEADERS:\n             val = ', '.join(sanitize_address(addr, encoding) for addr in getaddresses((val,)))\n-        else:\n-            val = Header(val, encoding).encode()\n+        elif name.lower() == 'message-id':\n+            domain_part = val.split('@')[-1]\n+            if not domain_part.isascii():\n+                domain_part = domain_part.encode('idna').decode('ascii')\n+                val = '@'.join(val.split('@')[:-1] + [domain_part])\n     else:\n         if name.lower() == 'subject':\n             val = Header(val).encode()\n", "occurrence": 1, "normalized_patch": "diff --git a/django/core/mail/message.py b/django/core/mail/message.py\nindex bf67640..e02bf28 100644\n--- a/django/core/mail/message.py\n+++ b/django/core/mail/message.py\n@@ -33,8 +33,11 @@ def forbid_multi_line_headers(name, val, encoding):\n     except UnicodeEncodeError:\n         if name.lower() in ADDRESS_HEADERS:\n             val = ', '.join((sanitize_address(addr, encoding) for addr in getaddresses((val,))))\n-        else:\n-            val = Header(val, encoding).encode()\n+        elif name.lower() == 'message-id':\n+            domain_part = val.split('@')[-1]\n+            if not domain_part.isascii():\n+                domain_part = domain_part.encode('idna').decode('ascii')\n+                val = '@'.join(val.split('@')[:-1] + [domain_part])\n     else:\n         if name.lower() == 'subject':\n             val = Header(val).encode()\n", "normalized_occurrence": 1}
