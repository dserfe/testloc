{"model_name_or_path": "agentless", "instance_id": "matplotlib__matplotlib-23987", "model_patch": "diff --git a/lib/matplotlib/figure.py b/lib/matplotlib/figure.py\nindex 71845c8..fc8c2bc 100644\n--- a/lib/matplotlib/figure.py\n+++ b/lib/matplotlib/figure.py\n@@ -2717,7 +2717,10 @@ class Figure(FigureBase):\n \n         See :doc:`/tutorials/intermediate/constrainedlayout_guide`.\n         \"\"\"\n-        return isinstance(self.get_layout_engine(), ConstrainedLayoutEngine)\n+        engine = self.get_layout_engine()\n+        if engine is None:\n+            return False\n+        return isinstance(engine, ConstrainedLayoutEngine)\n \n     @_api.deprecated(\"3.6\", alternative=\"set_layout_engine('constrained')\",\n                      pending=True)\n", "occurrence": 1, "normalized_patch": "diff --git a/lib/matplotlib/figure.py b/lib/matplotlib/figure.py\nindex 57abfc4..7f0eb97 100644\n--- a/lib/matplotlib/figure.py\n+++ b/lib/matplotlib/figure.py\n@@ -831,7 +831,10 @@ class Figure(FigureBase):\n             self.set_layout_engine(TightLayoutEngine(**_tight_parameters))\n         self.stale = True\n     def get_constrained_layout(self):\n-        return isinstance(self.get_layout_engine(), ConstrainedLayoutEngine)\n+        engine = self.get_layout_engine()\n+        if engine is None:\n+            return False\n+        return isinstance(engine, ConstrainedLayoutEngine)\n     @_api.deprecated('3.6', alternative=\"set_layout_engine('constrained')\", pending=True)\n     def set_constrained_layout(self, constrained):\n         if constrained is None:\n", "normalized_occurrence": 1}
