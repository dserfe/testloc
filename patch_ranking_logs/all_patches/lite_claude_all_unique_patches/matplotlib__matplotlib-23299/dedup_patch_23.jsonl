{"model_name_or_path": "agentless_claude", "instance_id": "matplotlib__matplotlib-23299", "model_patch": "diff --git a/lib/matplotlib/__init__.py b/lib/matplotlib/__init__.py\nindex afdb2d9..fb05245 100644\n--- a/lib/matplotlib/__init__.py\n+++ b/lib/matplotlib/__init__.py\n@@ -1175,6 +1175,11 @@ def get_backend():\n     --------\n     matplotlib.use\n     \"\"\"\n+    from matplotlib import pyplot\n+    # Ensure we have at least one figure manager before returning backend\n+    # This prevents figures from being cleared when they were created in rc_context\n+    if pyplot._pylab_helpers.Gcf.get_num_fig_managers():\n+        pyplot.figure(pyplot._pylab_helpers.Gcf.get_active().num)\n     return rcParams['backend']\n \n \n", "occurrence": 1, "normalized_patch": "diff --git a/lib/matplotlib/__init__.py b/lib/matplotlib/__init__.py\nindex dc57284..a38382e 100644\n--- a/lib/matplotlib/__init__.py\n+++ b/lib/matplotlib/__init__.py\n@@ -440,6 +440,9 @@ def use(backend, *, force=True):\n if os.environ.get('MPLBACKEND'):\n     rcParams['backend'] = os.environ.get('MPLBACKEND')\n def get_backend():\n+    from matplotlib import pyplot\n+    if pyplot._pylab_helpers.Gcf.get_num_fig_managers():\n+        pyplot.figure(pyplot._pylab_helpers.Gcf.get_active().num)\n     return rcParams['backend']\n def interactive(b):\n     rcParams['interactive'] = b\n", "normalized_occurrence": 1}
