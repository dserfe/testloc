{"model_name_or_path": "agentless_claude", "instance_id": "django__django-16032", "model_patch": "diff --git a/django/db/models/query.py b/django/db/models/query.py\nindex 5314293..ab3240b 100644\n--- a/django/db/models/query.py\n+++ b/django/db/models/query.py\n@@ -1299,6 +1299,9 @@ class QuerySet:\n         if expressions:\n             clone = clone.annotate(**expressions)\n         clone._fields = fields\n+        # Only include actual fields in subquery, not annotations or aliases\n+        if not fields and clone.query._annotations and clone.query.is_subquery:\n+            fields = [self.model._meta.pk.name]\n         clone.query.set_values(fields)\n         return clone\n \n", "occurrence": 1, "normalized_patch": "diff --git a/django/db/models/query.py b/django/db/models/query.py\nindex cb06696..a9423db 100644\n--- a/django/db/models/query.py\n+++ b/django/db/models/query.py\n@@ -696,6 +696,8 @@ class QuerySet:\n         if expressions:\n             clone = clone.annotate(**expressions)\n         clone._fields = fields\n+        if not fields and clone.query._annotations and clone.query.is_subquery:\n+            fields = [self.model._meta.pk.name]\n         clone.query.set_values(fields)\n         return clone\n     def values(self, *fields, **expressions):\n", "normalized_occurrence": 1}
