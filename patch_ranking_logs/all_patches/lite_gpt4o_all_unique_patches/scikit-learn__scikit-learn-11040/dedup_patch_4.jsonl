{"model_name_or_path": "agentless", "instance_id": "scikit-learn__scikit-learn-11040", "model_patch": "diff --git a/sklearn/neighbors/base.py b/sklearn/neighbors/base.py\nindex 01d85d0..1f5ec2e 100644\n--- a/sklearn/neighbors/base.py\n+++ b/sklearn/neighbors/base.py\n@@ -107,6 +107,11 @@ class NeighborsBase(six.with_metaclass(ABCMeta, BaseEstimator)):\n                  algorithm='auto', leaf_size=30, metric='minkowski',\n                  p=2, metric_params=None, n_jobs=1):\n \n+        if n_neighbors is not None:\n+            if isinstance(n_neighbors, float) and n_neighbors.is_integer():\n+                n_neighbors = int(n_neighbors)\n+            elif not isinstance(n_neighbors, int):\n+                raise ValueError(\"n_neighbors must be an integer. Got %s.\" % type(n_neighbors))\n         self.n_neighbors = n_neighbors\n         self.radius = radius\n         self.algorithm = algorithm\n@@ -328,7 +333,11 @@ class KNeighborsMixin(object):\n         if n_neighbors is None:\n             n_neighbors = self.n_neighbors\n \n-        if X is not None:\n+        if n_neighbors is not None:\n+            if isinstance(n_neighbors, float) and n_neighbors.is_integer():\n+                n_neighbors = int(n_neighbors)\n+            elif not isinstance(n_neighbors, int):\n+                raise ValueError(\"n_neighbors must be an integer. Got %s.\" % type(n_neighbors))\n             query_is_train = False\n             X = check_array(X, accept_sparse='csr')\n         else:\n@@ -468,7 +477,11 @@ class KNeighborsMixin(object):\n             n_neighbors = self.n_neighbors\n \n         # kneighbors does the None handling.\n-        if X is not None:\n+        if n_neighbors is not None:\n+            if isinstance(n_neighbors, float) and n_neighbors.is_integer():\n+                n_neighbors = int(n_neighbors)\n+            elif not isinstance(n_neighbors, int):\n+                raise ValueError(\"n_neighbors must be an integer. Got %s.\" % type(n_neighbors))\n             X = check_array(X, accept_sparse='csr')\n             n_samples1 = X.shape[0]\n         else:\n", "occurrence": 1, "normalized_patch": "diff --git a/sklearn/neighbors/base.py b/sklearn/neighbors/base.py\nindex ddfefae..07283fd 100644\n--- a/sklearn/neighbors/base.py\n+++ b/sklearn/neighbors/base.py\n@@ -47,6 +47,11 @@ def _get_weights(dist, weights):\n class NeighborsBase(six.with_metaclass(ABCMeta, BaseEstimator)):\n     @abstractmethod\n     def __init__(self, n_neighbors=None, radius=None, algorithm='auto', leaf_size=30, metric='minkowski', p=2, metric_params=None, n_jobs=1):\n+        if n_neighbors is not None:\n+            if isinstance(n_neighbors, float) and n_neighbors.is_integer():\n+                n_neighbors = int(n_neighbors)\n+            elif not isinstance(n_neighbors, int):\n+                raise ValueError('n_neighbors must be an integer. Got %s.' % type(n_neighbors))\n         self.n_neighbors = n_neighbors\n         self.radius = radius\n         self.algorithm = algorithm\n@@ -162,7 +167,11 @@ class KNeighborsMixin(object):\n         check_is_fitted(self, '_fit_method')\n         if n_neighbors is None:\n             n_neighbors = self.n_neighbors\n-        if X is not None:\n+        if n_neighbors is not None:\n+            if isinstance(n_neighbors, float) and n_neighbors.is_integer():\n+                n_neighbors = int(n_neighbors)\n+            elif not isinstance(n_neighbors, int):\n+                raise ValueError('n_neighbors must be an integer. Got %s.' % type(n_neighbors))\n             query_is_train = False\n             X = check_array(X, accept_sparse='csr')\n         else:\n@@ -219,7 +228,11 @@ class KNeighborsMixin(object):\n     def kneighbors_graph(self, X=None, n_neighbors=None, mode='connectivity'):\n         if n_neighbors is None:\n             n_neighbors = self.n_neighbors\n-        if X is not None:\n+        if n_neighbors is not None:\n+            if isinstance(n_neighbors, float) and n_neighbors.is_integer():\n+                n_neighbors = int(n_neighbors)\n+            elif not isinstance(n_neighbors, int):\n+                raise ValueError('n_neighbors must be an integer. Got %s.' % type(n_neighbors))\n             X = check_array(X, accept_sparse='csr')\n             n_samples1 = X.shape[0]\n         else:\n", "normalized_occurrence": 1}
