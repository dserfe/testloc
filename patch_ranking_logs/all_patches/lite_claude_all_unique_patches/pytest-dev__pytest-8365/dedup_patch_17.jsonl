{"model_name_or_path": "agentless_claude", "instance_id": "pytest-dev__pytest-8365", "model_patch": "diff --git a/src/_pytest/tmpdir.py b/src/_pytest/tmpdir.py\nindex cae5caf..740a9aa 100644\n--- a/src/_pytest/tmpdir.py\n+++ b/src/_pytest/tmpdir.py\n@@ -150,11 +150,15 @@ class TempdirFactory:\n \n def get_user() -> Optional[str]:\n     \"\"\"Return the current user name, or None if getuser() does not work\n-    in the current environment (see #1010).\"\"\"\n+    in the current environment (see #1010). The username is sanitized\n+    to ensure it is valid for directory creation.\"\"\"\n     import getpass\n \n     try:\n-        return getpass.getuser()\n+        user = getpass.getuser()\n+        # Take the part after the domain separator for domain usernames (e.g. \"contoso\\john_doe\" -> \"john_doe\")\n+        # and replace any remaining backslashes with hyphens\n+        return user.split('\\\\')[-1].replace('\\\\', '-')\n     except (ImportError, KeyError):\n         return None\n \n", "occurrence": 1, "normalized_patch": "diff --git a/src/_pytest/tmpdir.py b/src/_pytest/tmpdir.py\nindex 6f08c0a..1fb1487 100644\n--- a/src/_pytest/tmpdir.py\n+++ b/src/_pytest/tmpdir.py\n@@ -79,7 +79,8 @@ class TempdirFactory:\n def get_user() -> Optional[str]:\n     import getpass\n     try:\n-        return getpass.getuser()\n+        user = getpass.getuser()\n+        return user.split('\\\\')[-1].replace('\\\\', '-')\n     except (ImportError, KeyError):\n         return None\n def pytest_configure(config: Config) -> None:\n", "normalized_occurrence": 1}
