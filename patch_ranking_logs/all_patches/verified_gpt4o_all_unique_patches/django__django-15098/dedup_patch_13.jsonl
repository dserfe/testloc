{"model_name_or_path": "agentless", "instance_id": "django__django-15098", "model_patch": "diff --git a/django/utils/translation/trans_real.py b/django/utils/translation/trans_real.py\nindex 488a2d8..865c278 100644\n--- a/django/utils/translation/trans_real.py\n+++ b/django/utils/translation/trans_real.py\n@@ -466,7 +466,9 @@ def get_supported_language_variant(lang_code, strict=False):\n     Return the language code that's listed in supported languages, possibly\n     selecting a more generic variant. Raise LookupError if nothing is found.\n \n-    If `strict` is False (the default), look for a country-specific variant\n+    If `strict` is False (the default), look for a script-specific or\n+    country-specific variant when neither the language code nor its generic\n+    variant is found.\n     when neither the language code nor its generic variant is found.\n \n     lru_cache should have a maxsize to prevent from memory exhaustion attacks,\n@@ -483,7 +485,9 @@ def get_supported_language_variant(lang_code, strict=False):\n             pass\n         i = None\n         while (i := lang_code.rfind('-', 0, i)) > -1:\n-            possible_lang_codes.append(lang_code[:i])\n+            sub_lang_code = lang_code[:i]\n+            if not sub_lang_code.endswith('-'):\n+                possible_lang_codes.append(sub_lang_code)\n         generic_lang_code = possible_lang_codes[-1]\n         supported_lang_codes = get_languages()\n \n@@ -502,7 +506,9 @@ def get_language_from_path(path, strict=False):\n     \"\"\"\n     Return the language code if there's a valid language code found in `path`.\n \n-    If `strict` is False (the default), look for a country-specific variant\n+    If `strict` is False (the default), look for a script-specific or\n+    country-specific variant when neither the language code nor its generic\n+    variant is found.\n     when neither the language code nor its generic variant is found.\n     \"\"\"\n     regex_match = language_code_prefix_re.match(path)\n", "occurrence": 1, "normalized_patch": "diff --git a/django/utils/translation/trans_real.py b/django/utils/translation/trans_real.py\nindex 05d14a5..e789e72 100644\n--- a/django/utils/translation/trans_real.py\n+++ b/django/utils/translation/trans_real.py\n@@ -256,7 +256,9 @@ def get_supported_language_variant(lang_code, strict=False):\n             pass\n         i = None\n         while (i := lang_code.rfind('-', 0, i)) > -1:\n-            possible_lang_codes.append(lang_code[:i])\n+            sub_lang_code = lang_code[:i]\n+            if not sub_lang_code.endswith('-'):\n+                possible_lang_codes.append(sub_lang_code)\n         generic_lang_code = possible_lang_codes[-1]\n         supported_lang_codes = get_languages()\n         for code in possible_lang_codes:\n", "normalized_occurrence": 1}
