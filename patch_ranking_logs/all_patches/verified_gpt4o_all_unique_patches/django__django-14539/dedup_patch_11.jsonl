{"model_name_or_path": "agentless", "instance_id": "django__django-14539", "model_patch": "diff --git a/django/utils/html.py b/django/utils/html.py\nindex 809fc0f..7084934 100644\n--- a/django/utils/html.py\n+++ b/django/utils/html.py\n@@ -336,12 +336,13 @@ def urlize(text, trim_url_limit=None, nofollow=False, autoescape=False):\n                     lead, trail = escape(lead), escape(trail)\n                     trimmed = escape(trimmed)\n                 middle = '<a href=\"%s\"%s>%s</a>' % (escape(url), nofollow_attr, trimmed)\n+                lead, middle, trail = trim_punctuation(lead, middle, trail)\n                 words[i] = mark_safe('%s%s%s' % (lead, middle, trail))\n             else:\n                 if safe_input:\n-                    words[i] = mark_safe(word)\n+                    words[i] = mark_safe(lead + word + trail)\n                 elif autoescape:\n-                    words[i] = escape(word)\n+                    words[i] = escape(lead) + escape(word) + escape(trail)\n         elif safe_input:\n             words[i] = mark_safe(word)\n         elif autoescape:\n", "occurrence": 1, "normalized_patch": "diff --git a/django/utils/html.py b/django/utils/html.py\nindex ed1e228..23eefe3 100644\n--- a/django/utils/html.py\n+++ b/django/utils/html.py\n@@ -160,11 +160,12 @@ def urlize(text, trim_url_limit=None, nofollow=False, autoescape=False):\n                     lead, trail = (escape(lead), escape(trail))\n                     trimmed = escape(trimmed)\n                 middle = '<a href=\"%s\"%s>%s</a>' % (escape(url), nofollow_attr, trimmed)\n+                lead, middle, trail = trim_punctuation(lead, middle, trail)\n                 words[i] = mark_safe('%s%s%s' % (lead, middle, trail))\n             elif safe_input:\n-                words[i] = mark_safe(word)\n+                words[i] = mark_safe(lead + word + trail)\n             elif autoescape:\n-                words[i] = escape(word)\n+                words[i] = escape(lead) + escape(word) + escape(trail)\n         elif safe_input:\n             words[i] = mark_safe(word)\n         elif autoescape:\n", "normalized_occurrence": 1}
