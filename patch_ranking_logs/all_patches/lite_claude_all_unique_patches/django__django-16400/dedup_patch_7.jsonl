{"model_name_or_path": "agentless_claude", "instance_id": "django__django-16400", "model_patch": "diff --git a/django/contrib/auth/management/__init__.py b/django/contrib/auth/management/__init__.py\nindex c21d9d7..4548135 100644\n--- a/django/contrib/auth/management/__init__.py\n+++ b/django/contrib/auth/management/__init__.py\n@@ -76,9 +76,19 @@ def create_permissions(\n     for klass in app_config.get_models():\n         # Force looking up the content types in the current database\n         # before creating foreign keys to them.\n-        ctype = ContentType.objects.db_manager(using).get_for_model(\n-            klass, for_concrete_model=False\n-        )\n+        content_type_manager = ContentType.objects.using(using)\n+        try:\n+            # First try to get the content type directly from the database\n+            ctype = content_type_manager.get(\n+                app_label=klass._meta.app_label,\n+                model=klass._meta.model_name,\n+            )\n+        except ContentType.DoesNotExist:\n+            # If it doesn't exist, create it using the specified database\n+            ctype = content_type_manager.create(\n+                app_label=klass._meta.app_label,\n+                model=klass._meta.model_name,\n+            )\n \n         ctypes.add(ctype)\n         for perm in _get_all_permissions(klass._meta):\n", "occurrence": 1, "normalized_patch": "diff --git a/django/contrib/auth/management/__init__.py b/django/contrib/auth/management/__init__.py\nindex eb43af8..44a3c03 100644\n--- a/django/contrib/auth/management/__init__.py\n+++ b/django/contrib/auth/management/__init__.py\n@@ -28,7 +28,11 @@ def create_permissions(app_config, verbosity=2, interactive=True, using=DEFAULT_\n     searched_perms = []\n     ctypes = set()\n     for klass in app_config.get_models():\n-        ctype = ContentType.objects.db_manager(using).get_for_model(klass, for_concrete_model=False)\n+        content_type_manager = ContentType.objects.using(using)\n+        try:\n+            ctype = content_type_manager.get(app_label=klass._meta.app_label, model=klass._meta.model_name)\n+        except ContentType.DoesNotExist:\n+            ctype = content_type_manager.create(app_label=klass._meta.app_label, model=klass._meta.model_name)\n         ctypes.add(ctype)\n         for perm in _get_all_permissions(klass._meta):\n             searched_perms.append((ctype, perm))\n", "normalized_occurrence": 1}
