{"model_name_or_path": "agentless", "instance_id": "scikit-learn__scikit-learn-13779", "model_patch": "diff --git a/sklearn/ensemble/voting.py b/sklearn/ensemble/voting.py\nindex 858d868..5bde7e8 100644\n--- a/sklearn/ensemble/voting.py\n+++ b/sklearn/ensemble/voting.py\n@@ -95,6 +95,13 @@ class _BaseVoting(_BaseComposition, TransformerMixin):\n                                                  sample_weight=sample_weight)\n                 for clf in clfs if clf is not None)\n \n+        # Check if sample_weight is provided and filter NoneType estimators before fitting\n+        if sample_weight is not None:\n+            clfs = [clf for clf in clfs if clf is not None]\n+            weights = self._weights_not_none\n+            if weights is not None and len(weights) != len(clfs):\n+                raise ValueError('Number of `estimators` and weights must be equal after filtering out NoneType estimators.')\n+\n         self.named_estimators_ = Bunch()\n         for k, e in zip(self.estimators, self.estimators_):\n             self.named_estimators_[k[0]] = e\n", "occurrence": 1, "normalized_patch": "diff --git a/sklearn/ensemble/voting.py b/sklearn/ensemble/voting.py\nindex c17361f..b46ba9a 100644\n--- a/sklearn/ensemble/voting.py\n+++ b/sklearn/ensemble/voting.py\n@@ -43,6 +43,11 @@ class _BaseVoting(_BaseComposition, TransformerMixin):\n         if n_isnone == len(self.estimators):\n             raise ValueError('All estimators are None. At least one is required!')\n         self.estimators_ = Parallel(n_jobs=self.n_jobs)((delayed(_parallel_fit_estimator)(clone(clf), X, y, sample_weight=sample_weight) for clf in clfs if clf is not None))\n+        if sample_weight is not None:\n+            clfs = [clf for clf in clfs if clf is not None]\n+            weights = self._weights_not_none\n+            if weights is not None and len(weights) != len(clfs):\n+                raise ValueError('Number of `estimators` and weights must be equal after filtering out NoneType estimators.')\n         self.named_estimators_ = Bunch()\n         for k, e in zip(self.estimators, self.estimators_):\n             self.named_estimators_[k[0]] = e\n", "normalized_occurrence": 1}
