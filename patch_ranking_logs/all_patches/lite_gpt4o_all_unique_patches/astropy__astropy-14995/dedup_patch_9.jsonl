{"model_name_or_path": "agentless", "instance_id": "astropy__astropy-14995", "model_patch": "diff --git a/astropy/nddata/mixins/ndarithmetic.py b/astropy/nddata/mixins/ndarithmetic.py\nindex fbb2aba..4efae2a 100644\n--- a/astropy/nddata/mixins/ndarithmetic.py\n+++ b/astropy/nddata/mixins/ndarithmetic.py\n@@ -524,7 +524,17 @@ class NDArithmeticMixin:\n             return deepcopy(self.mask)\n         else:\n             # Now lets calculate the resulting mask (operation enforces copy)\n-            return handle_mask(self.mask, operand.mask, **kwds)\n+            if self.mask is None:\n+                mask1 = np.zeros_like(self.data, dtype=bool)\n+            else:\n+                mask1 = self.mask\n+\n+            if operand.mask is None:\n+                mask2 = np.zeros_like(operand.data, dtype=bool)\n+            else:\n+                mask2 = operand.mask\n+                \n+            return handle_mask(mask1, mask2, **kwds)\n \n     def _arithmetic_wcs(self, operation, operand, compare_wcs, **kwds):\n         \"\"\"\n", "occurrence": 1, "normalized_patch": "diff --git a/astropy/nddata/mixins/ndarithmetic.py b/astropy/nddata/mixins/ndarithmetic.py\nindex b7eb663..536a3ed 100644\n--- a/astropy/nddata/mixins/ndarithmetic.py\n+++ b/astropy/nddata/mixins/ndarithmetic.py\n@@ -119,7 +119,15 @@ class NDArithmeticMixin:\n         elif operand is None:\n             return deepcopy(self.mask)\n         else:\n-            return handle_mask(self.mask, operand.mask, **kwds)\n+            if self.mask is None:\n+                mask1 = np.zeros_like(self.data, dtype=bool)\n+            else:\n+                mask1 = self.mask\n+            if operand.mask is None:\n+                mask2 = np.zeros_like(operand.data, dtype=bool)\n+            else:\n+                mask2 = operand.mask\n+            return handle_mask(mask1, mask2, **kwds)\n     def _arithmetic_wcs(self, operation, operand, compare_wcs, **kwds):\n         if not compare_wcs(self.wcs, operand.wcs, **kwds):\n             raise ValueError('WCS are not equal.')\n", "normalized_occurrence": 2}
