{"model_name_or_path": "agentless", "instance_id": "sympy__sympy-11870", "model_patch": "diff --git a/sympy/simplify/trigsimp.py b/sympy/simplify/trigsimp.py\nindex bd243c1..d477e31 100644\n--- a/sympy/simplify/trigsimp.py\n+++ b/sympy/simplify/trigsimp.py\n@@ -476,7 +476,7 @@ def trigsimp(expr, **opts):\n     expr = sympify(expr)\n \n     try:\n-        return expr._eval_trigsimp(**opts)\n+        return exptrigsimp(expr._eval_trigsimp(**opts))\n     except AttributeError:\n         pass\n \n@@ -535,10 +535,10 @@ def exptrigsimp(expr):\n         # select the better of e, and e rewritten in terms of exp or trig\n         # functions\n         choices = [e]\n-        if e.has(*_trigs):\n+        if e.has(*_trigs) or e.has(I):\n             choices.append(e.rewrite(exp))\n         choices.append(e.rewrite(cos))\n-        return min(*choices, key=count_ops)\n+        return min(choices, key=count_ops)\n     newexpr = bottom_up(expr, exp_trig)\n \n     def f(rv):\n", "occurrence": 1, "normalized_patch": "diff --git a/sympy/simplify/trigsimp.py b/sympy/simplify/trigsimp.py\nindex 8c4936d..b67e772 100644\n--- a/sympy/simplify/trigsimp.py\n+++ b/sympy/simplify/trigsimp.py\n@@ -148,7 +148,7 @@ def trigsimp(expr, **opts):\n     from sympy.simplify.fu import fu\n     expr = sympify(expr)\n     try:\n-        return expr._eval_trigsimp(**opts)\n+        return exptrigsimp(expr._eval_trigsimp(**opts))\n     except AttributeError:\n         pass\n     old = opts.pop('old', False)\n@@ -177,10 +177,10 @@ def exptrigsimp(expr):\n     from sympy.simplify.simplify import bottom_up\n     def exp_trig(e):\n         choices = [e]\n-        if e.has(*_trigs):\n+        if e.has(*_trigs) or e.has(I):\n             choices.append(e.rewrite(exp))\n         choices.append(e.rewrite(cos))\n-        return min(*choices, key=count_ops)\n+        return min(choices, key=count_ops)\n     newexpr = bottom_up(expr, exp_trig)\n     def f(rv):\n         if not rv.is_Mul:\n", "normalized_occurrence": 1}
