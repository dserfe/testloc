{"model_name_or_path": "agentless_claude", "instance_id": "sympy__sympy-13915", "model_patch": "diff --git a/sympy/core/basic.py b/sympy/core/basic.py\nindex 0977e81..cf3aca5 100644\n--- a/sympy/core/basic.py\n+++ b/sympy/core/basic.py\n@@ -1032,6 +1032,12 @@ class Basic(with_metaclass(ManagedProperties)):\n         rv = self._eval_subs(old, new)\n         if rv is None:\n             rv = fallback(self, old, new)\n+            \n+        # Check if substitution leads to 0/0 form\n+        from sympy.core.numbers import Nan\n+        if rv.is_number and rv.has(Nan):\n+            from sympy import nan\n+            return nan\n         return rv\n \n     def _eval_subs(self, old, new):\n", "occurrence": 1, "normalized_patch": "diff --git a/sympy/core/basic.py b/sympy/core/basic.py\nindex 782db85..0419260 100644\n--- a/sympy/core/basic.py\n+++ b/sympy/core/basic.py\n@@ -365,6 +365,10 @@ class Basic(with_metaclass(ManagedProperties)):\n         rv = self._eval_subs(old, new)\n         if rv is None:\n             rv = fallback(self, old, new)\n+        from sympy.core.numbers import Nan\n+        if rv.is_number and rv.has(Nan):\n+            from sympy import nan\n+            return nan\n         return rv\n     def _eval_subs(self, old, new):\n         return None\n", "normalized_occurrence": 1}
