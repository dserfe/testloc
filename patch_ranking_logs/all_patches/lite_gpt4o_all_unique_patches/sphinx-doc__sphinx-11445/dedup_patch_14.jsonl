{"model_name_or_path": "agentless", "instance_id": "sphinx-doc__sphinx-11445", "model_patch": "diff --git a/sphinx/parsers.py b/sphinx/parsers.py\nindex 1ab7d44..664cd10 100644\n--- a/sphinx/parsers.py\n+++ b/sphinx/parsers.py\n@@ -82,7 +82,17 @@ class RSTParser(docutils.parsers.rst.Parser, Parser):\n \n     def decorate(self, content: StringList) -> None:\n         \"\"\"Preprocess reST content before parsing.\"\"\"\n-        prepend_prolog(content, self.config.rst_prolog)\n+        # Ensure rst_prolog is prepended after domain directives\n+        domain_directive_pattern = re.compile(r'^\\s*\\.\\.\\s*:\\w+:\\w*:`[^`]*`\\s*$', re.MULTILINE)\n+        match = domain_directive_pattern.search(str(content))\n+        if match:\n+            lines = str(content).split('\\n')\n+            prolog_lines = self.config.rst_prolog.split('\\n')\n+            insert_pos = match.end() if match else 0\n+            new_content = lines[:insert_pos] + prolog_lines + lines[insert_pos:]\n+            content = StringList(new_content)\n+        else:\n+            prepend_prolog(content, self.config.rst_prolog)\n         append_epilog(content, self.config.rst_epilog)\n \n \n@@ -93,4 +103,4 @@ def setup(app: Sphinx) -> dict[str, Any]:\n         'version': 'builtin',\n         'parallel_read_safe': True,\n         'parallel_write_safe': True,\n-    }\n+    }\n", "occurrence": 1, "normalized_patch": "diff --git a/sphinx/parsers.py b/sphinx/parsers.py\nindex a99dedf..8af1538 100644\n--- a/sphinx/parsers.py\n+++ b/sphinx/parsers.py\n@@ -36,7 +36,16 @@ class RSTParser(docutils.parsers.rst.Parser, Parser):\n         self.statemachine.run(inputlines, document, inliner=self.inliner)\n         self.finish_parse()\n     def decorate(self, content: StringList) -> None:\n-        prepend_prolog(content, self.config.rst_prolog)\n+        domain_directive_pattern = re.compile('^\\\\s*\\\\.\\\\.\\\\s*:\\\\w+:\\\\w*:`[^`]*`\\\\s*$', re.MULTILINE)\n+        match = domain_directive_pattern.search(str(content))\n+        if match:\n+            lines = str(content).split('\\n')\n+            prolog_lines = self.config.rst_prolog.split('\\n')\n+            insert_pos = match.end() if match else 0\n+            new_content = lines[:insert_pos] + prolog_lines + lines[insert_pos:]\n+            content = StringList(new_content)\n+        else:\n+            prepend_prolog(content, self.config.rst_prolog)\n         append_epilog(content, self.config.rst_epilog)\n def setup(app: Sphinx) -> dict[str, Any]:\n     app.add_source_parser(RSTParser)\n", "normalized_occurrence": 1}
