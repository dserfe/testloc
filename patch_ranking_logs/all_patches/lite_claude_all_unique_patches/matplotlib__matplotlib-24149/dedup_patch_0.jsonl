{"model_name_or_path": "agentless_claude", "instance_id": "matplotlib__matplotlib-24149", "model_patch": "diff --git a/lib/matplotlib/cbook/__init__.py b/lib/matplotlib/cbook/__init__.py\nindex 63a9e60..07a5d2b 100644\n--- a/lib/matplotlib/cbook/__init__.py\n+++ b/lib/matplotlib/cbook/__init__.py\n@@ -1708,13 +1708,14 @@ def safe_first_element(obj):\n \n def _safe_first_finite(obj, *, skip_nonfinite=True):\n     \"\"\"\n-    Return the first non-None (and optionally finite) element in *obj*.\n+    Return the first element in *obj*, optionally skipping non-finite values.\n \n     This is a method for internal use.\n \n-    This is an type-independent way of obtaining the first non-None element,\n+    This is a type-independent way of obtaining the first element,\n     supporting both index access and the iterator protocol.\n-    The first non-None element will be obtained when skip_none is True.\n+    When skip_nonfinite is True, returns the first finite non-None element.\n+    When skip_nonfinite is False, returns the first element regardless of value.\n     \"\"\"\n     def safe_isfinite(val):\n         if val is None:\n@@ -1746,7 +1747,11 @@ def _safe_first_finite(obj, *, skip_nonfinite=True):\n         raise RuntimeError(\"matplotlib does not \"\n                            \"support generators as input\")\n     else:\n-        return next(val for val in obj if safe_isfinite(val))\n+        try:\n+            return next(val for val in obj if safe_isfinite(val))\n+        except StopIteration:\n+            # If no finite values found, return the first value\n+            return next(iter(obj))\n \n \n def sanitize_sequence(data):\n", "occurrence": 1, "normalized_patch": "diff --git a/lib/matplotlib/cbook/__init__.py b/lib/matplotlib/cbook/__init__.py\nindex d655165..7bd52fc 100644\n--- a/lib/matplotlib/cbook/__init__.py\n+++ b/lib/matplotlib/cbook/__init__.py\n@@ -750,7 +750,10 @@ def _safe_first_finite(obj, *, skip_nonfinite=True):\n     elif isinstance(obj, collections.abc.Iterator):\n         raise RuntimeError('matplotlib does not support generators as input')\n     else:\n-        return next((val for val in obj if safe_isfinite(val)))\n+        try:\n+            return next((val for val in obj if safe_isfinite(val)))\n+        except StopIteration:\n+            return next(iter(obj))\n def sanitize_sequence(data):\n     return list(data) if isinstance(data, collections.abc.MappingView) else data\n def normalize_kwargs(kw, alias_mapping=None):\n", "normalized_occurrence": 22}
