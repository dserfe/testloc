{"model_name_or_path": "agentless", "instance_id": "django__django-16819", "model_patch": "diff --git a/django/db/migrations/optimizer.py b/django/db/migrations/optimizer.py\nindex a9ec258..0856bc7 100644\n--- a/django/db/migrations/optimizer.py\n+++ b/django/db/migrations/optimizer.py\n@@ -66,4 +66,15 @@ class MigrationOptimizer:\n                     right = False\n             else:\n                 new_operations.append(operation)\n-        return new_operations\n+        # Perform AddIndex and RemoveIndex optimizations\n+        i = 0\n+        while i < len(new_operations) - 1:\n+            current_op = new_operations[i]\n+            next_op = new_operations[i + 1]\n+            if (isinstance(current_op, AddIndex) and isinstance(next_op, RemoveIndex) and\n+                current_op.model_name_lower == next_op.model_name_lower and\n+                current_op.index.name == next_op.name):\n+                # Remove redundant AddIndex followed by RemoveIndex\n+                new_operations = new_operations[:i] + new_operations[i + 2:]\n+            else:\n+                i += 1\n", "occurrence": 1, "normalized_patch": "diff --git a/django/db/migrations/optimizer.py b/django/db/migrations/optimizer.py\nindex 06fbfa5..e4b675b 100644\n--- a/django/db/migrations/optimizer.py\n+++ b/django/db/migrations/optimizer.py\n@@ -32,4 +32,11 @@ class MigrationOptimizer:\n                     right = False\n             else:\n                 new_operations.append(operation)\n-        return new_operations\n\\ No newline at end of file\n+        i = 0\n+        while i < len(new_operations) - 1:\n+            current_op = new_operations[i]\n+            next_op = new_operations[i + 1]\n+            if isinstance(current_op, AddIndex) and isinstance(next_op, RemoveIndex) and (current_op.model_name_lower == next_op.model_name_lower) and (current_op.index.name == next_op.name):\n+                new_operations = new_operations[:i] + new_operations[i + 2:]\n+            else:\n+                i += 1\n\\ No newline at end of file\n", "normalized_occurrence": 1}
