{"model_name_or_path": "agentless_claude", "instance_id": "matplotlib__matplotlib-25960", "model_patch": "diff --git a/lib/matplotlib/_layoutgrid.py b/lib/matplotlib/_layoutgrid.py\nindex c834b91..075cb94 100644\n--- a/lib/matplotlib/_layoutgrid.py\n+++ b/lib/matplotlib/_layoutgrid.py\n@@ -223,8 +223,12 @@ class LayoutGrid:\n                  self.margins['leftcb'][i])\n             c = (w == w0 * self.width_ratios[i])\n             self.solver.addConstraint(c | 'strong')\n-            # constrain the grid cells to be directly next to each other.\n-            c = (self.rights[i - 1] == self.lefts[i])\n+            # Add horizontal space between columns based on wspace\n+            total_width = self.rights[-1] - self.lefts[0]\n+            w_space = total_width * self.wspace\n+            if self.ncols > 1:\n+                w_space = w_space / (self.ncols - 1)\n+            c = (self.lefts[i] == self.rights[i - 1] + w_space)\n             self.solver.addConstraint(c | 'strong')\n \n         # constrain heights:\n@@ -240,8 +244,12 @@ class LayoutGrid:\n                  self.margins['bottomcb'][i])\n             c = (h == h0 * self.height_ratios[i])\n             self.solver.addConstraint(c | 'strong')\n-            # constrain the grid cells to be directly above each other.\n-            c = (self.bottoms[i - 1] == self.tops[i])\n+            # Add vertical space between rows based on hspace\n+            total_height = self.tops[0] - self.bottoms[-1]\n+            h_space = total_height * self.hspace\n+            if self.nrows > 1:\n+                h_space = h_space / (self.nrows - 1)\n+            c = (self.tops[i] == self.bottoms[i - 1] - h_space)\n             self.solver.addConstraint(c | 'strong')\n \n     # Margin editing:  The margins are variable and meant to\n", "occurrence": 1, "normalized_patch": "diff --git a/lib/matplotlib/_layoutgrid.py b/lib/matplotlib/_layoutgrid.py\nindex 08c1909..78c094a 100644\n--- a/lib/matplotlib/_layoutgrid.py\n+++ b/lib/matplotlib/_layoutgrid.py\n@@ -110,7 +110,11 @@ class LayoutGrid:\n             w = w - self.lefts[i] - self.margins['left'][i] - self.margins['leftcb'][i]\n             c = w == w0 * self.width_ratios[i]\n             self.solver.addConstraint(c | 'strong')\n-            c = self.rights[i - 1] == self.lefts[i]\n+            total_width = self.rights[-1] - self.lefts[0]\n+            w_space = total_width * self.wspace\n+            if self.ncols > 1:\n+                w_space = w_space / (self.ncols - 1)\n+            c = self.lefts[i] == self.rights[i - 1] + w_space\n             self.solver.addConstraint(c | 'strong')\n         h = self.tops[0] - self.margins['top'][0] - self.margins['topcb'][0]\n         h = h - self.bottoms[0] - self.margins['bottom'][0] - self.margins['bottomcb'][0]\n@@ -120,7 +124,11 @@ class LayoutGrid:\n             h = h - self.bottoms[i] - self.margins['bottom'][i] - self.margins['bottomcb'][i]\n             c = h == h0 * self.height_ratios[i]\n             self.solver.addConstraint(c | 'strong')\n-            c = self.bottoms[i - 1] == self.tops[i]\n+            total_height = self.tops[0] - self.bottoms[-1]\n+            h_space = total_height * self.hspace\n+            if self.nrows > 1:\n+                h_space = h_space / (self.nrows - 1)\n+            c = self.tops[i] == self.bottoms[i - 1] - h_space\n             self.solver.addConstraint(c | 'strong')\n     def edit_margin(self, todo, size, cell):\n         self.solver.suggestValue(self.margins[todo][cell], size)\n", "normalized_occurrence": 1}
