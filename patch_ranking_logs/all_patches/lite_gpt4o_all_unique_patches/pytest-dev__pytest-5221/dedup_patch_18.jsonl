{"model_name_or_path": "agentless", "instance_id": "pytest-dev__pytest-5221", "model_patch": "diff --git a/src/_pytest/fixtures.py b/src/_pytest/fixtures.py\nindex 8772615..fe767e2 100644\n--- a/src/_pytest/fixtures.py\n+++ b/src/_pytest/fixtures.py\n@@ -1199,7 +1199,16 @@ class FixtureManager(object):\n                     arg2fixturedefs[argname] = fixturedefs\n                     merge(fixturedefs[-1].argnames)\n \n+        def get_scope_name(scope_num):\n+            scope_names = [\"function\", \"class\", \"module\", \"session\"]\n+            return scope_names[scope_num]\n+\n         def sort_by_scope(arg_name):\n+            fixturedefs = arg2fixturedefs.get(arg_name, [])\n+            if fixturedefs:\n+                scope_num = fixturedefs[-1].scopenum\n+                return scopes.index(get_scope_name(scope_num))\n+            return scopes.index(\"function\")\n             try:\n                 fixturedefs = arg2fixturedefs[arg_name]\n             except KeyError:\n", "occurrence": 1, "normalized_patch": "diff --git a/src/_pytest/fixtures.py b/src/_pytest/fixtures.py\nindex f3fbe6f..c243909 100644\n--- a/src/_pytest/fixtures.py\n+++ b/src/_pytest/fixtures.py\n@@ -684,7 +684,15 @@ class FixtureManager(object):\n                 if fixturedefs:\n                     arg2fixturedefs[argname] = fixturedefs\n                     merge(fixturedefs[-1].argnames)\n+        def get_scope_name(scope_num):\n+            scope_names = ['function', 'class', 'module', 'session']\n+            return scope_names[scope_num]\n         def sort_by_scope(arg_name):\n+            fixturedefs = arg2fixturedefs.get(arg_name, [])\n+            if fixturedefs:\n+                scope_num = fixturedefs[-1].scopenum\n+                return scopes.index(get_scope_name(scope_num))\n+            return scopes.index('function')\n             try:\n                 fixturedefs = arg2fixturedefs[arg_name]\n             except KeyError:\n", "normalized_occurrence": 1}
