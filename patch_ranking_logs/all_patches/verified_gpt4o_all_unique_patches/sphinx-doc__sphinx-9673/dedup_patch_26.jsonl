{"model_name_or_path": "agentless", "instance_id": "sphinx-doc__sphinx-9673", "model_patch": "diff --git a/sphinx/ext/napoleon/docstring.py b/sphinx/ext/napoleon/docstring.py\nindex ea465e6..d2ad40f 100644\n--- a/sphinx/ext/napoleon/docstring.py\n+++ b/sphinx/ext/napoleon/docstring.py\n@@ -767,6 +767,7 @@ class GoogleDocstring:\n         return self._parse_generic_section(_('References'), use_admonition)\n \n     def _parse_returns_section(self, section: str) -> List[str]:\n+        app = self._config._app\n         fields = self._consume_returns_section()\n         multi = len(fields) > 1\n         if multi:\n@@ -776,8 +777,10 @@ class GoogleDocstring:\n \n         lines: List[str] = []\n         for _name, _type, _desc in fields:\n-            if use_rtype:\n+            if use_rtype or (app.config.autodoc_typehints_description_target == \"documented\" and _type):\n                 field = self._format_field(_name, '', _desc)\n+                if _type:\n+                    lines.extend([':rtype: %s' % _type, ''])\n             else:\n                 field = self._format_field(_name, _type, _desc)\n \n@@ -788,8 +791,6 @@ class GoogleDocstring:\n                     lines.extend(self._format_block(':returns: * ', field))\n             else:\n                 lines.extend(self._format_block(':returns: ', field))\n-                if _type and use_rtype:\n-                    lines.extend([':rtype: %s' % _type, ''])\n         if lines and lines[-1]:\n             lines.append('')\n         return lines\n", "occurrence": 1, "normalized_patch": "diff --git a/sphinx/ext/napoleon/docstring.py b/sphinx/ext/napoleon/docstring.py\nindex bc7a995..adc04e3 100644\n--- a/sphinx/ext/napoleon/docstring.py\n+++ b/sphinx/ext/napoleon/docstring.py\n@@ -505,6 +505,7 @@ class GoogleDocstring:\n         use_admonition = self._config.napoleon_use_admonition_for_references\n         return self._parse_generic_section(_('References'), use_admonition)\n     def _parse_returns_section(self, section: str) -> List[str]:\n+        app = self._config._app\n         fields = self._consume_returns_section()\n         multi = len(fields) > 1\n         if multi:\n@@ -513,8 +514,10 @@ class GoogleDocstring:\n             use_rtype = self._config.napoleon_use_rtype\n         lines: List[str] = []\n         for _name, _type, _desc in fields:\n-            if use_rtype:\n+            if use_rtype or (app.config.autodoc_typehints_description_target == 'documented' and _type):\n                 field = self._format_field(_name, '', _desc)\n+                if _type:\n+                    lines.extend([':rtype: %s' % _type, ''])\n             else:\n                 field = self._format_field(_name, _type, _desc)\n             if multi:\n@@ -524,8 +527,6 @@ class GoogleDocstring:\n                     lines.extend(self._format_block(':returns: * ', field))\n             else:\n                 lines.extend(self._format_block(':returns: ', field))\n-                if _type and use_rtype:\n-                    lines.extend([':rtype: %s' % _type, ''])\n         if lines and lines[-1]:\n             lines.append('')\n         return lines\n", "normalized_occurrence": 1}
