{"model_name_or_path": "agentless_claude", "instance_id": "django__django-16315", "model_patch": "diff --git a/django/db/backends/postgresql/operations.py b/django/db/backends/postgresql/operations.py\nindex 7b1b714..94f32ab 100644\n--- a/django/db/backends/postgresql/operations.py\n+++ b/django/db/backends/postgresql/operations.py\n@@ -353,14 +353,24 @@ class DatabaseOperations(BaseDatabaseOperations):\n         if on_conflict == OnConflict.IGNORE:\n             return \"ON CONFLICT DO NOTHING\"\n         if on_conflict == OnConflict.UPDATE:\n+            # Get the actual column names from db_column or fall back to field name\n+            def get_column_name(field_name):\n+                for field in fields:\n+                    if field.name == field_name:\n+                        return field.column\n+                return field_name\n+\n+            quoted_unique = [\n+                self.quote_name(get_column_name(field_name))\n+                for field_name in unique_fields\n+            ]\n+            updates = [\n+                f\"{self.quote_name(get_column_name(field_name))} = EXCLUDED.{self.quote_name(get_column_name(field_name))}\"\n+                for field_name in update_fields\n+            ]\n             return \"ON CONFLICT(%s) DO UPDATE SET %s\" % (\n-                \", \".join(map(self.quote_name, unique_fields)),\n-                \", \".join(\n-                    [\n-                        f\"{field} = EXCLUDED.{field}\"\n-                        for field in map(self.quote_name, update_fields)\n-                    ]\n-                ),\n+                \", \".join(quoted_unique),\n+                \", \".join(updates),\n             )\n         return super().on_conflict_suffix_sql(\n             fields,\n", "occurrence": 1, "normalized_patch": "diff --git a/django/db/backends/postgresql/operations.py b/django/db/backends/postgresql/operations.py\nindex 75da682..587ef19 100644\n--- a/django/db/backends/postgresql/operations.py\n+++ b/django/db/backends/postgresql/operations.py\n@@ -186,5 +186,12 @@ class DatabaseOperations(BaseDatabaseOperations):\n         if on_conflict == OnConflict.IGNORE:\n             return 'ON CONFLICT DO NOTHING'\n         if on_conflict == OnConflict.UPDATE:\n-            return 'ON CONFLICT(%s) DO UPDATE SET %s' % (', '.join(map(self.quote_name, unique_fields)), ', '.join([f'{field} = EXCLUDED.{field}' for field in map(self.quote_name, update_fields)]))\n+            def get_column_name(field_name):\n+                for field in fields:\n+                    if field.name == field_name:\n+                        return field.column\n+                return field_name\n+            quoted_unique = [self.quote_name(get_column_name(field_name)) for field_name in unique_fields]\n+            updates = [f'{self.quote_name(get_column_name(field_name))} = EXCLUDED.{self.quote_name(get_column_name(field_name))}' for field_name in update_fields]\n+            return 'ON CONFLICT(%s) DO UPDATE SET %s' % (', '.join(quoted_unique), ', '.join(updates))\n         return super().on_conflict_suffix_sql(fields, on_conflict, update_fields, unique_fields)\n\\ No newline at end of file\n", "normalized_occurrence": 1}
