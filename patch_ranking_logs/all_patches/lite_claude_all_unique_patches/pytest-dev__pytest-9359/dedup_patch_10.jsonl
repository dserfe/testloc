{"model_name_or_path": "agentless_claude", "instance_id": "pytest-dev__pytest-9359", "model_patch": "diff --git a/src/_pytest/assertion/rewrite.py b/src/_pytest/assertion/rewrite.py\nindex 9657da0..667e4ca 100644\n--- a/src/_pytest/assertion/rewrite.py\n+++ b/src/_pytest/assertion/rewrite.py\n@@ -603,8 +603,10 @@ def _get_assertion_exprs(src: bytes) -> Dict[int, str]:\n             elif tp in {tokenize.NEWLINE, tokenize.ENDMARKER}:\n                 _write_and_reset()\n             elif lines and lineno not in seen_lines:\n-                lines.append(line)\n-                seen_lines.add(lineno)\n+                # Only include lines that are part of the actual assertion\n+                if not any(t.string == '@' for t in tokens[idx:]) and not any(t.string == 'def' for t in tokens[idx:]):\n+                    lines.append(line)\n+                    seen_lines.add(lineno)\n \n     return ret\n \n", "occurrence": 1, "normalized_patch": "diff --git a/src/_pytest/assertion/rewrite.py b/src/_pytest/assertion/rewrite.py\nindex 9f4da3b..9f0c237 100644\n--- a/src/_pytest/assertion/rewrite.py\n+++ b/src/_pytest/assertion/rewrite.py\n@@ -346,8 +346,9 @@ def _get_assertion_exprs(src: bytes) -> Dict[int, str]:\n             elif tp in {tokenize.NEWLINE, tokenize.ENDMARKER}:\n                 _write_and_reset()\n             elif lines and lineno not in seen_lines:\n-                lines.append(line)\n-                seen_lines.add(lineno)\n+                if not any((t.string == '@' for t in tokens[idx:])) and (not any((t.string == 'def' for t in tokens[idx:]))):\n+                    lines.append(line)\n+                    seen_lines.add(lineno)\n     return ret\n class AssertionRewriter(ast.NodeVisitor):\n     def __init__(self, module_path: Optional[str], config: Optional[Config], source: bytes) -> None:\n", "normalized_occurrence": 1}
