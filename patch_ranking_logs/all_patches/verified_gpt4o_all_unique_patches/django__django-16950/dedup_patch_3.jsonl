{"model_name_or_path": "agentless", "instance_id": "django__django-16950", "model_patch": "diff --git a/django/contrib/admin/helpers.py b/django/contrib/admin/helpers.py\nindex 164effe..3744619 100644\n--- a/django/contrib/admin/helpers.py\n+++ b/django/contrib/admin/helpers.py\n@@ -345,6 +345,8 @@ class InlineAdminFormSet:\n             self.formset.initial_forms, self.formset.get_queryset()\n         ):\n             view_on_site_url = self.opts.get_view_on_site_url(original)\n+            if not self.formset.empty_form.instance.pk:\n+                self.formset.empty_form.instance.id = uuid.uuid4()\n             yield InlineAdminForm(\n                 self.formset,\n                 form,\n@@ -356,6 +358,10 @@ class InlineAdminFormSet:\n                 view_on_site_url=view_on_site_url,\n             )\n         for form in self.formset.extra_forms:\n+            if not form.instance.pk:\n+                form.instance.id = form.instance.id or uuid.uuid4()\n+            if not self.formset.empty_form.instance.pk:\n+                self.formset.empty_form.instance.id = uuid.uuid4()\n             yield InlineAdminForm(\n                 self.formset,\n                 form,\n@@ -366,6 +372,8 @@ class InlineAdminFormSet:\n                 model_admin=self.opts,\n             )\n         if self.has_add_permission:\n+            if not self.formset.empty_form.instance.pk:\n+                self.formset.empty_form.instance.id = uuid.uuid4()\n             yield InlineAdminForm(\n                 self.formset,\n                 self.formset.empty_form,\n", "occurrence": 1, "normalized_patch": "diff --git a/django/contrib/admin/helpers.py b/django/contrib/admin/helpers.py\nindex 1fb8b88..5c0974a 100644\n--- a/django/contrib/admin/helpers.py\n+++ b/django/contrib/admin/helpers.py\n@@ -190,10 +190,18 @@ class InlineAdminFormSet:\n             readonly_fields_for_editing = self.readonly_fields + flatten_fieldsets(self.fieldsets)\n         for form, original in zip(self.formset.initial_forms, self.formset.get_queryset()):\n             view_on_site_url = self.opts.get_view_on_site_url(original)\n+            if not self.formset.empty_form.instance.pk:\n+                self.formset.empty_form.instance.id = uuid.uuid4()\n             yield InlineAdminForm(self.formset, form, self.fieldsets, self.prepopulated_fields, original, readonly_fields_for_editing, model_admin=self.opts, view_on_site_url=view_on_site_url)\n         for form in self.formset.extra_forms:\n+            if not form.instance.pk:\n+                form.instance.id = form.instance.id or uuid.uuid4()\n+            if not self.formset.empty_form.instance.pk:\n+                self.formset.empty_form.instance.id = uuid.uuid4()\n             yield InlineAdminForm(self.formset, form, self.fieldsets, self.prepopulated_fields, None, self.readonly_fields, model_admin=self.opts)\n         if self.has_add_permission:\n+            if not self.formset.empty_form.instance.pk:\n+                self.formset.empty_form.instance.id = uuid.uuid4()\n             yield InlineAdminForm(self.formset, self.formset.empty_form, self.fieldsets, self.prepopulated_fields, None, self.readonly_fields, model_admin=self.opts)\n     def fields(self):\n         fk = getattr(self.formset, 'fk', None)\n", "normalized_occurrence": 1}
