{"model_name_or_path": "agentless", "instance_id": "django__django-13417", "model_patch": "diff --git a/django/db/models/sql/compiler.py b/django/db/models/sql/compiler.py\nindex b8a8c1e..466c07c 100644\n--- a/django/db/models/sql/compiler.py\n+++ b/django/db/models/sql/compiler.py\n@@ -277,17 +277,20 @@ class SQLCompiler:\n         can add aliases to clauses that do not yet have one, or it can\n         add totally new select clauses).\n         \"\"\"\n-        if self.query.extra_order_by:\n-            ordering = self.query.extra_order_by\n-        elif not self.query.default_ordering:\n-            ordering = self.query.order_by\n-        elif self.query.order_by:\n-            ordering = self.query.order_by\n-        elif self.query.get_meta().ordering:\n-            ordering = self.query.get_meta().ordering\n-            self._meta_ordering = ordering\n-        else:\n+        if self.query.group_by is not None:\n             ordering = []\n+        else:\n+            if self.query.extra_order_by:\n+                ordering = self.query.extra_order_by\n+            elif not self.query.default_ordering:\n+                ordering = self.query.order_by\n+            elif self.query.order_by:\n+                ordering = self.query.order_by\n+            elif self.query.get_meta().ordering:\n+                ordering = self.query.get_meta().ordering\n+                self._meta_ordering = ordering\n+            else:\n+                ordering = []\n         if self.query.standard_ordering:\n             asc, desc = ORDER_DIR['ASC']\n         else:\n", "occurrence": 1, "normalized_patch": "diff --git a/django/db/models/sql/compiler.py b/django/db/models/sql/compiler.py\nindex 89a1b28..a9844b9 100644\n--- a/django/db/models/sql/compiler.py\n+++ b/django/db/models/sql/compiler.py\n@@ -132,7 +132,9 @@ class SQLCompiler:\n             ret.append((col, (sql, params), alias))\n         return (ret, klass_info, annotations)\n     def get_order_by(self):\n-        if self.query.extra_order_by:\n+        if self.query.group_by is not None:\n+            ordering = []\n+        elif self.query.extra_order_by:\n             ordering = self.query.extra_order_by\n         elif not self.query.default_ordering:\n             ordering = self.query.order_by\n", "normalized_occurrence": 1}
