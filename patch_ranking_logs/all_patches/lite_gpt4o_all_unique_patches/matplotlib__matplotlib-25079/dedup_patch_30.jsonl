{"model_name_or_path": "agentless", "instance_id": "matplotlib__matplotlib-25079", "model_patch": "diff --git a/lib/matplotlib/cm.py b/lib/matplotlib/cm.py\nindex 06f543d..af82401 100644\n--- a/lib/matplotlib/cm.py\n+++ b/lib/matplotlib/cm.py\n@@ -583,8 +583,9 @@ class ScalarMappable:\n         in_init = self.cmap is None\n \n         self.cmap = _ensure_cmap(cmap)\n-        if not in_init:\n-            self.changed()  # Things are not set up properly yet.\n+        # Always ensure the colorbar associated with this mappable is updated\n+        # when the normalization is updated.\n+        self.changed()  # Things are not set up properly yet.\n \n     @property\n     def norm(self):\n", "occurrence": 1, "normalized_patch": "diff --git a/lib/matplotlib/cm.py b/lib/matplotlib/cm.py\nindex f5a7578..4664252 100644\n--- a/lib/matplotlib/cm.py\n+++ b/lib/matplotlib/cm.py\n@@ -169,8 +169,7 @@ class ScalarMappable:\n     def set_cmap(self, cmap):\n         in_init = self.cmap is None\n         self.cmap = _ensure_cmap(cmap)\n-        if not in_init:\n-            self.changed()\n+        self.changed()\n     @property\n     def norm(self):\n         return self._norm\n", "normalized_occurrence": 2}
