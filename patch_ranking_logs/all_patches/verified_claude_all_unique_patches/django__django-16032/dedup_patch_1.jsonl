{"model_name_or_path": "agentless_claude", "instance_id": "django__django-16032", "model_patch": "diff --git a/django/db/models/query.py b/django/db/models/query.py\nindex 5314293..31d2184 100644\n--- a/django/db/models/query.py\n+++ b/django/db/models/query.py\n@@ -1635,6 +1635,9 @@ class QuerySet:\n                     is_summary=False,\n                     select=select,\n                 )\n+                # Mark annotation as non-selectable for subqueries if select=False\n+                if not select:\n+                    clone.query.annotations[alias].select = False\n         for alias, annotation in clone.query.annotations.items():\n             if alias in annotations and annotation.contains_aggregate:\n                 if clone._fields is None:\n", "occurrence": 1, "normalized_patch": "diff --git a/django/db/models/query.py b/django/db/models/query.py\nindex cb06696..2bcb74b 100644\n--- a/django/db/models/query.py\n+++ b/django/db/models/query.py\n@@ -871,6 +871,8 @@ class QuerySet:\n                 clone.query.add_filtered_relation(annotation, alias)\n             else:\n                 clone.query.add_annotation(annotation, alias, is_summary=False, select=select)\n+                if not select:\n+                    clone.query.annotations[alias].select = False\n         for alias, annotation in clone.query.annotations.items():\n             if alias in annotations and annotation.contains_aggregate:\n                 if clone._fields is None:\n", "normalized_occurrence": 3}
