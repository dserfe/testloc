{"model_name_or_path": "agentless_claude", "instance_id": "django__django-12965", "model_patch": "diff --git a/django/db/models/sql/compiler.py b/django/db/models/sql/compiler.py\nindex 7c860dc..8465bfd 100644\n--- a/django/db/models/sql/compiler.py\n+++ b/django/db/models/sql/compiler.py\n@@ -1423,8 +1423,16 @@ class SQLDeleteCompiler(SQLCompiler):\n         Create the SQL for this query. Return the SQL string and list of\n         parameters.\n         \"\"\"\n-        if self.single_alias:\n+        # Use simple DELETE without subquery if:\n+        # - we have a single alias (no joins)\n+        # - we're deleting from the base table\n+        # - we don't have any complex where conditions\n+        if (self.single_alias and \n+            self.query.where.is_empty() or \n+            (not self.query.where.contains_subqueries() and \n+             not self.query.where.contains_aggregate)):\n             return self._as_sql(self.query)\n+        \n         innerq = self.query.clone()\n         innerq.__class__ = Query\n         innerq.clear_select_clause()\n", "occurrence": 1, "normalized_patch": "diff --git a/django/db/models/sql/compiler.py b/django/db/models/sql/compiler.py\nindex 8178df0..66fc74e 100644\n--- a/django/db/models/sql/compiler.py\n+++ b/django/db/models/sql/compiler.py\n@@ -798,7 +798,7 @@ class SQLDeleteCompiler(SQLCompiler):\n             result.append('WHERE %s' % where)\n         return (' '.join(result), tuple(params))\n     def as_sql(self):\n-        if self.single_alias:\n+        if self.single_alias and self.query.where.is_empty() or (not self.query.where.contains_subqueries() and (not self.query.where.contains_aggregate)):\n             return self._as_sql(self.query)\n         innerq = self.query.clone()\n         innerq.__class__ = Query\n", "normalized_occurrence": 1}
