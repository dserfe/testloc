{"model_name_or_path": "agentless_claude", "instance_id": "scikit-learn__scikit-learn-10908", "model_patch": "diff --git a/sklearn/feature_extraction/text.py b/sklearn/feature_extraction/text.py\nindex 7e240fc..1ba6244 100644\n--- a/sklearn/feature_extraction/text.py\n+++ b/sklearn/feature_extraction/text.py\n@@ -993,8 +993,15 @@ class CountVectorizer(BaseEstimator, VectorizerMixin):\n \n     def get_feature_names(self):\n         \"\"\"Array mapping from feature integer indices to feature name\"\"\"\n-        self._check_vocabulary()\n+        if not hasattr(self, 'vocabulary_') and self.vocabulary is not None:\n+            vocab = self.vocabulary\n+            if isinstance(vocab, dict):\n+                vocab = vocab.copy()\n+            else:\n+                vocab = {v: i for i, v in enumerate(vocab)}\n+            self.vocabulary_ = vocab\n \n+        self._check_vocabulary()\n         return [t for t, i in sorted(six.iteritems(self.vocabulary_),\n                                      key=itemgetter(1))]\n \n", "occurrence": 1, "normalized_patch": "diff --git a/sklearn/feature_extraction/text.py b/sklearn/feature_extraction/text.py\nindex 583049b..55cf8dc 100644\n--- a/sklearn/feature_extraction/text.py\n+++ b/sklearn/feature_extraction/text.py\n@@ -364,6 +364,13 @@ class CountVectorizer(BaseEstimator, VectorizerMixin):\n         inverse_vocabulary = terms[np.argsort(indices)]\n         return [inverse_vocabulary[X[i, :].nonzero()[1]].ravel() for i in range(n_samples)]\n     def get_feature_names(self):\n+        if not hasattr(self, 'vocabulary_') and self.vocabulary is not None:\n+            vocab = self.vocabulary\n+            if isinstance(vocab, dict):\n+                vocab = vocab.copy()\n+            else:\n+                vocab = {v: i for i, v in enumerate(vocab)}\n+            self.vocabulary_ = vocab\n         self._check_vocabulary()\n         return [t for t, i in sorted(six.iteritems(self.vocabulary_), key=itemgetter(1))]\n def _make_int_array():\n", "normalized_occurrence": 1}
