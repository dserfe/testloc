{"model_name_or_path": "agentless", "instance_id": "sympy__sympy-21614", "model_patch": "diff --git a/sympy/core/function.py b/sympy/core/function.py\nindex ab763da..98a4b4e 100644\n--- a/sympy/core/function.py\n+++ b/sympy/core/function.py\n@@ -1509,7 +1509,9 @@ class Derivative(Expr):\n             from sympy.core.exprtools import factor_terms\n             from sympy.simplify.simplify import signsimp\n             expr = factor_terms(signsimp(expr))\n-        return expr\n+        if isinstance(expr, MatrixExpr):\n+            return MatrixKind(expr.kind)\n+        return expr.kind\n \n     @property\n     def canonical(cls):\n", "occurrence": 1, "normalized_patch": "diff --git a/sympy/core/function.py b/sympy/core/function.py\nindex 96e033b..9c8f8f2 100644\n--- a/sympy/core/function.py\n+++ b/sympy/core/function.py\n@@ -589,7 +589,9 @@ class Derivative(Expr):\n             from sympy.core.exprtools import factor_terms\n             from sympy.simplify.simplify import signsimp\n             expr = factor_terms(signsimp(expr))\n-        return expr\n+        if isinstance(expr, MatrixExpr):\n+            return MatrixKind(expr.kind)\n+        return expr.kind\n     @property\n     def canonical(cls):\n         return cls.func(cls.expr, *Derivative._sort_variable_count(cls.variable_count))\n", "normalized_occurrence": 1}
