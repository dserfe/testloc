{"model_name_or_path": "agentless", "instance_id": "django__django-11039", "model_patch": "diff --git a/django/core/management/commands/sqlmigrate.py b/django/core/management/commands/sqlmigrate.py\nindex e8d2c40..b51d173 100644\n--- a/django/core/management/commands/sqlmigrate.py\n+++ b/django/core/management/commands/sqlmigrate.py\n@@ -56,10 +56,10 @@ class Command(BaseCommand):\n         targets = [(app_label, migration.name)]\n \n         # Show begin/end around output only for atomic migrations\n-        self.output_transaction = migration.atomic\n+        self.output_transaction = migration.atomic and connection.features.can_rollback_ddl\n \n         # Make a plan that represents just the requested migrations and show SQL\n         # for it\n         plan = [(executor.loader.graph.nodes[targets[0]], options['backwards'])]\n         sql_statements = executor.collect_sql(plan)\n-        return '\\n'.join(sql_statements)\n+        return '\\n'.join(sql_statements)\n", "occurrence": 12, "normalized_patch": "diff --git a/django/core/management/commands/sqlmigrate.py b/django/core/management/commands/sqlmigrate.py\nindex a0048fc..70ceb8f 100644\n--- a/django/core/management/commands/sqlmigrate.py\n+++ b/django/core/management/commands/sqlmigrate.py\n@@ -31,7 +31,7 @@ class Command(BaseCommand):\n         except KeyError:\n             raise CommandError(\"Cannot find a migration matching '%s' from app '%s'. Is it in INSTALLED_APPS?\" % (migration_name, app_label))\n         targets = [(app_label, migration.name)]\n-        self.output_transaction = migration.atomic\n+        self.output_transaction = migration.atomic and connection.features.can_rollback_ddl\n         plan = [(executor.loader.graph.nodes[targets[0]], options['backwards'])]\n         sql_statements = executor.collect_sql(plan)\n         return '\\n'.join(sql_statements)\n\\ No newline at end of file\n", "normalized_occurrence": 44}
