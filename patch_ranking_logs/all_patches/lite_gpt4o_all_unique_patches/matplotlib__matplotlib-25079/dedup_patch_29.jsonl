{"model_name_or_path": "agentless", "instance_id": "matplotlib__matplotlib-25079", "model_patch": "diff --git a/lib/matplotlib/cm.py b/lib/matplotlib/cm.py\nindex 06f543d..ab53657 100644\n--- a/lib/matplotlib/cm.py\n+++ b/lib/matplotlib/cm.py\n@@ -605,18 +605,21 @@ class ScalarMappable:\n                 ) from None\n             norm = _auto_norm_from_scale(scale_cls)()\n \n-        if norm is self.norm:\n-            # We aren't updating anything\n-            return\n-\n         in_init = self.norm is None\n-        # Remove the current callback and connect to the new one\n-        if not in_init:\n-            self.norm.callbacks.disconnect(self._id_norm)\n-        self._norm = norm\n-        self._id_norm = self.norm.callbacks.connect('changed',\n-                                                    self.changed)\n-        if not in_init:\n+        if norm is not self.norm:\n+            # Remove the current callback and connect to the new one\n+            if not in_init:\n+                self.norm.callbacks.disconnect(self._id_norm)\n+            self._norm = norm\n+            self._id_norm = self.norm.callbacks.connect('changed',\n+                                                        self.changed)\n+            if not in_init:\n+                self.changed()\n+        else:\n+            # Even if norm is the same, ensure limits are re-evaluated\n+            self.norm.vmin = colors._sanitize_extrema(norm.vmin)\n+            self.norm.vmax = colors._sanitize_extrema(norm.vmax)\n+            self.norm.autoscale_None(self._A)\n             self.changed()\n \n     def set_norm(self, norm):\n", "occurrence": 1, "normalized_patch": "diff --git a/lib/matplotlib/cm.py b/lib/matplotlib/cm.py\nindex f5a7578..e1aedea 100644\n--- a/lib/matplotlib/cm.py\n+++ b/lib/matplotlib/cm.py\n@@ -185,14 +185,18 @@ class ScalarMappable:\n             except KeyError:\n                 raise ValueError(f\"Invalid norm str name; the following values are supported: {', '.join(scale._scale_mapping)}\") from None\n             norm = _auto_norm_from_scale(scale_cls)()\n-        if norm is self.norm:\n-            return\n         in_init = self.norm is None\n-        if not in_init:\n-            self.norm.callbacks.disconnect(self._id_norm)\n-        self._norm = norm\n-        self._id_norm = self.norm.callbacks.connect('changed', self.changed)\n-        if not in_init:\n+        if norm is not self.norm:\n+            if not in_init:\n+                self.norm.callbacks.disconnect(self._id_norm)\n+            self._norm = norm\n+            self._id_norm = self.norm.callbacks.connect('changed', self.changed)\n+            if not in_init:\n+                self.changed()\n+        else:\n+            self.norm.vmin = colors._sanitize_extrema(norm.vmin)\n+            self.norm.vmax = colors._sanitize_extrema(norm.vmax)\n+            self.norm.autoscale_None(self._A)\n             self.changed()\n     def set_norm(self, norm):\n         self.norm = norm\n", "normalized_occurrence": 1}
