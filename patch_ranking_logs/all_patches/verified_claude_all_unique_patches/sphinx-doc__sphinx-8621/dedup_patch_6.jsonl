{"model_name_or_path": "agentless_claude", "instance_id": "sphinx-doc__sphinx-8621", "model_patch": "diff --git a/sphinx/roles.py b/sphinx/roles.py\nindex 307975f..c3a484f 100644\n--- a/sphinx/roles.py\n+++ b/sphinx/roles.py\n@@ -32,10 +32,51 @@ if False:\n     from sphinx.environment import BuildEnvironment\n \n \n+class KbdRole(SphinxRole):\n+    \"\"\"Role for keyboard shortcuts.\"\"\"\n+    \n+    def run(self) -> Tuple[List[Node], List[system_message]]:\n+        # Special case: single character that could be a separator\n+        if self.text in ('-', '+', '^'):\n+            node = nodes.literal(self.rawtext, self.text, role='kbd', classes=['kbd'])\n+            return [node], []\n+            \n+        # Handle compound keystrokes\n+        parts = []\n+        current = ''\n+        i = 0\n+        while i < len(self.text):\n+            if i + 1 < len(self.text) and self.text[i:i+2] in ('\\\\-', '\\\\+', '\\\\^'):\n+                # Handle escaped separators\n+                current += self.text[i+1]\n+                i += 2\n+            elif self.text[i] in ('-', '+', '^') and current:\n+                # Only treat as separator if we have accumulated some text\n+                if current:\n+                    parts.append(current)\n+                    current = ''\n+                parts.append(self.text[i])\n+                i += 1\n+            else:\n+                current += self.text[i]\n+                i += 1\n+        if current:\n+            parts.append(current)\n+\n+        node = nodes.literal(self.rawtext, '', role='kbd', classes=['kbd'])\n+        for i, part in enumerate(parts):\n+            if part in ('-', '+', '^'):\n+                # Add separator text\n+                node += nodes.Text(part, part)\n+            else:\n+                # Add nested kbd for each key\n+                kbd = nodes.literal('', part, role='kbd', classes=['kbd'])\n+                node += kbd\n+        return [node], []\n+\n generic_docroles = {\n     'command': addnodes.literal_strong,\n     'dfn': nodes.emphasis,\n-    'kbd': nodes.literal,\n     'mailheader': addnodes.literal_emphasis,\n     'makevar': addnodes.literal_strong,\n     'manpage': addnodes.manpage,\n", "occurrence": 1, "normalized_patch": "--- a/sphinx/roles.py\n+++ b/sphinx/roles.py\n-generic_docroles = {'command': addnodes.literal_strong, 'dfn': nodes.emphasis, 'kbd': nodes.literal, 'mailheader': addnodes.literal_emphasis, 'makevar': addnodes.literal_strong, 'manpage': addnodes.manpage, 'mimetype': addnodes.literal_emphasis, 'newsgroup': addnodes.literal_emphasis, 'program': addnodes.literal_strong, 'regexp': nodes.literal}\n+class KbdRole(SphinxRole):\n+    def run(self) -> Tuple[List[Node], List[system_message]]:\n+        if self.text in ('-', '+', '^'):\n+            node = nodes.literal(self.rawtext, self.text, role='kbd', classes=['kbd'])\n+            return ([node], [])\n+        parts = []\n+        current = ''\n+        i = 0\n+        while i < len(self.text):\n+            if i + 1 < len(self.text) and self.text[i:i + 2] in ('\\\\-', '\\\\+', '\\\\^'):\n+                current += self.text[i + 1]\n+                i += 2\n+            elif self.text[i] in ('-', '+', '^') and current:\n+                if current:\n+                    parts.append(current)\n+                    current = ''\n+                parts.append(self.text[i])\n+                i += 1\n+            else:\n+                current += self.text[i]\n+                i += 1\n+        if current:\n+            parts.append(current)\n+        node = nodes.literal(self.rawtext, '', role='kbd', classes=['kbd'])\n+        for i, part in enumerate(parts):\n+            if part in ('-', '+', '^'):\n+                node += nodes.Text(part, part)\n+            else:\n+                kbd = nodes.literal('', part, role='kbd', classes=['kbd'])\n+                node += kbd\n+        return ([node], [])\n+generic_docroles = {'command': addnodes.literal_strong, 'dfn': nodes.emphasis, 'mailheader': addnodes.literal_emphasis, 'makevar': addnodes.literal_strong, 'manpage': addnodes.manpage, 'mimetype': addnodes.literal_emphasis, 'newsgroup': addnodes.literal_emphasis, 'program': addnodes.literal_strong, 'regexp': nodes.literal}", "normalized_occurrence": 1}
