{"model_name_or_path": "agentless", "instance_id": "pylint-dev__pylint-6528", "model_patch": "diff --git a/pylint/lint/expand_modules.py b/pylint/lint/expand_modules.py\nindex 94af730..20a1b03 100644\n--- a/pylint/lint/expand_modules.py\n+++ b/pylint/lint/expand_modules.py\n@@ -63,10 +63,36 @@ def expand_modules(\n         basename = os.path.basename(something)\n         if (\n             basename in ignore_list\n-            or _is_in_ignore_list_re(os.path.basename(something), ignore_list_re)\n+            or _is_in_ignore_list_re(basename, ignore_list_re)\n             or _is_in_ignore_list_re(something, ignore_list_paths_re)\n         ):\n             continue\n+        if os.path.isdir(something):\n+            for root, dirs, files in os.walk(something):\n+                if any(\n+                    _is_in_ignore_list_re(os.path.join(root, d), ignore_list_paths_re)\n+                    for d in dirs\n+                ):\n+                    dirs[:] = [\n+                        d for d in dirs if not _is_in_ignore_list_re(os.path.join(root, d), ignore_list_paths_re)\n+                    ]\n+                for file in files:\n+                    if (\n+                        file in ignore_list\n+                        or _is_in_ignore_list_re(file, ignore_list_re)\n+                        or _is_in_ignore_list_re(os.path.join(root, file), ignore_list_paths_re)\n+                    ):\n+                        continue\n+                    result.append(\n+                        {\n+                            \"path\": os.path.join(root, file),\n+                            \"name\": \".\".join(modutils.modpath_from_file(os.path.join(root, file))),\n+                            \"isarg\": False,\n+                            \"basepath\": os.path.join(root, file),\n+                            \"basename\": file,\n+                        }\n+                    )\n+            continue\n         module_path = get_python_path(something)\n         additional_search_path = [\".\", module_path] + path\n         if os.path.exists(something):\n@@ -146,4 +172,4 @@ def expand_modules(\n                         \"basename\": modname,\n                     }\n                 )\n-    return result, errors\n+    return result, errors\n", "occurrence": 1, "normalized_patch": "diff --git a/pylint/lint/expand_modules.py b/pylint/lint/expand_modules.py\nindex 37bdd47..5c9f763 100644\n--- a/pylint/lint/expand_modules.py\n+++ b/pylint/lint/expand_modules.py\n@@ -28,7 +28,16 @@ def expand_modules(files_or_modules: Sequence[str], ignore_list: list[str], igno\n     path = sys.path.copy()\n     for something in files_or_modules:\n         basename = os.path.basename(something)\n-        if basename in ignore_list or _is_in_ignore_list_re(os.path.basename(something), ignore_list_re) or _is_in_ignore_list_re(something, ignore_list_paths_re):\n+        if basename in ignore_list or _is_in_ignore_list_re(basename, ignore_list_re) or _is_in_ignore_list_re(something, ignore_list_paths_re):\n+            continue\n+        if os.path.isdir(something):\n+            for root, dirs, files in os.walk(something):\n+                if any((_is_in_ignore_list_re(os.path.join(root, d), ignore_list_paths_re) for d in dirs)):\n+                    dirs[:] = [d for d in dirs if not _is_in_ignore_list_re(os.path.join(root, d), ignore_list_paths_re)]\n+                for file in files:\n+                    if file in ignore_list or _is_in_ignore_list_re(file, ignore_list_re) or _is_in_ignore_list_re(os.path.join(root, file), ignore_list_paths_re):\n+                        continue\n+                    result.append({'path': os.path.join(root, file), 'name': '.'.join(modutils.modpath_from_file(os.path.join(root, file))), 'isarg': False, 'basepath': os.path.join(root, file), 'basename': file})\n             continue\n         module_path = get_python_path(something)\n         additional_search_path = ['.', module_path] + path\n", "normalized_occurrence": 1}
