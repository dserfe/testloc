{"model_name_or_path": "agentless", "instance_id": "matplotlib__matplotlib-23299", "model_patch": "diff --git a/lib/matplotlib/_pylab_helpers.py b/lib/matplotlib/_pylab_helpers.py\nindex 3123d3a..c54d25b 100644\n--- a/lib/matplotlib/_pylab_helpers.py\n+++ b/lib/matplotlib/_pylab_helpers.py\n@@ -1,3 +1,4 @@\n+\n \"\"\"\n Manage figures for the pyplot interface.\n \"\"\"\n@@ -5,6 +6,7 @@ Manage figures for the pyplot interface.\n import atexit\n from collections import OrderedDict\n import gc\n+import matplotlib.pyplot as plt\n \n \n class Gcf:\n@@ -88,7 +90,11 @@ class Gcf:\n         for manager in list(cls.figs.values()):\n             manager.canvas.mpl_disconnect(manager._cidgcf)\n             manager.destroy()\n+        saved_figs = list(cls.figs.items())\n         cls.figs.clear()\n+        for num, manager in saved_figs:\n+            if manager.canvas.figure.stale:\n+                plt.figure(manager.num)\n         gc.collect(1)\n \n     @classmethod\n@@ -141,4 +147,4 @@ class Gcf:\n                 manager.canvas.draw_idle()\n \n \n-atexit.register(Gcf.destroy_all)\n+atexit.register(Gcf.destroy_all)\n", "occurrence": 1, "normalized_patch": "diff --git a/lib/matplotlib/_pylab_helpers.py b/lib/matplotlib/_pylab_helpers.py\nindex 75c28d8..8183b9e 100644\n--- a/lib/matplotlib/_pylab_helpers.py\n+++ b/lib/matplotlib/_pylab_helpers.py\n@@ -1,6 +1,7 @@\n import atexit\n from collections import OrderedDict\n import gc\n+import matplotlib.pyplot as plt\n class Gcf:\n     figs = OrderedDict()\n     @classmethod\n@@ -36,7 +37,11 @@ class Gcf:\n         for manager in list(cls.figs.values()):\n             manager.canvas.mpl_disconnect(manager._cidgcf)\n             manager.destroy()\n+        saved_figs = list(cls.figs.items())\n         cls.figs.clear()\n+        for num, manager in saved_figs:\n+            if manager.canvas.figure.stale:\n+                plt.figure(manager.num)\n         gc.collect(1)\n     @classmethod\n     def has_fignum(cls, num):\n", "normalized_occurrence": 1}
