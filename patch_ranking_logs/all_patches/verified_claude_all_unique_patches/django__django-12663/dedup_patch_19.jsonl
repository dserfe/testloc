{"model_name_or_path": "agentless_claude", "instance_id": "django__django-12663", "model_patch": "diff --git a/django/db/models/lookups.py b/django/db/models/lookups.py\nindex 9cf4391..d6168fc 100644\n--- a/django/db/models/lookups.py\n+++ b/django/db/models/lookups.py\n@@ -71,7 +71,12 @@ class Lookup:\n         if hasattr(self.rhs, 'resolve_expression'):\n             return self.rhs\n         if self.prepare_rhs and hasattr(self.lhs.output_field, 'get_prep_value'):\n-            return self.lhs.output_field.get_prep_value(self.rhs)\n+            value = self.rhs\n+            # Handle SimpleLazyObject by resolving it first\n+            if hasattr(value, '_wrapped') and hasattr(value, '_setup'):\n+                value._setup()\n+                value = value._wrapped\n+            return self.lhs.output_field.get_prep_value(value)\n         return self.rhs\n \n     def get_db_prep_lookup(self, value, connection):\n", "occurrence": 1, "normalized_patch": "diff --git a/django/db/models/lookups.py b/django/db/models/lookups.py\nindex 5a8ba48..cca162e 100644\n--- a/django/db/models/lookups.py\n+++ b/django/db/models/lookups.py\n@@ -58,7 +58,11 @@ class Lookup:\n         if hasattr(self.rhs, 'resolve_expression'):\n             return self.rhs\n         if self.prepare_rhs and hasattr(self.lhs.output_field, 'get_prep_value'):\n-            return self.lhs.output_field.get_prep_value(self.rhs)\n+            value = self.rhs\n+            if hasattr(value, '_wrapped') and hasattr(value, '_setup'):\n+                value._setup()\n+                value = value._wrapped\n+            return self.lhs.output_field.get_prep_value(value)\n         return self.rhs\n     def get_db_prep_lookup(self, value, connection):\n         return ('%s', [value])\n", "normalized_occurrence": 1}
