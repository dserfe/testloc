{"model_name_or_path": "agentless", "instance_id": "django__django-16315", "model_patch": "diff --git a/django/db/models/sql/compiler.py b/django/db/models/sql/compiler.py\nindex a582ec7..bf65398 100644\n--- a/django/db/models/sql/compiler.py\n+++ b/django/db/models/sql/compiler.py\n@@ -1722,11 +1722,17 @@ class SQLInsertCompiler(SQLCompiler):\n \n         placeholder_rows, param_rows = self.assemble_as_sql(fields, value_rows)\n \n+        def get_db_column(field):\n+            return field.db_column if field.db_column else field.column\n+        \n+        db_update_fields = [get_db_column(f) for f in self.query.update_fields]\n+        db_unique_fields = [get_db_column(f) for f in self.query.unique_fields]\n+\n         on_conflict_suffix_sql = self.connection.ops.on_conflict_suffix_sql(\n             fields,\n             self.query.on_conflict,\n-            self.query.update_fields,\n-            self.query.unique_fields,\n+            db_update_fields,\n+            db_unique_fields,\n         )\n         if (\n             self.returning_fields\n", "occurrence": 1, "normalized_patch": "diff --git a/django/db/models/sql/compiler.py b/django/db/models/sql/compiler.py\nindex d745181..1de5341 100644\n--- a/django/db/models/sql/compiler.py\n+++ b/django/db/models/sql/compiler.py\n@@ -856,7 +856,11 @@ class SQLInsertCompiler(SQLCompiler):\n             fields = [None]\n         can_bulk = not self.returning_fields and self.connection.features.has_bulk_insert\n         placeholder_rows, param_rows = self.assemble_as_sql(fields, value_rows)\n-        on_conflict_suffix_sql = self.connection.ops.on_conflict_suffix_sql(fields, self.query.on_conflict, self.query.update_fields, self.query.unique_fields)\n+        def get_db_column(field):\n+            return field.db_column if field.db_column else field.column\n+        db_update_fields = [get_db_column(f) for f in self.query.update_fields]\n+        db_unique_fields = [get_db_column(f) for f in self.query.unique_fields]\n+        on_conflict_suffix_sql = self.connection.ops.on_conflict_suffix_sql(fields, self.query.on_conflict, db_update_fields, db_unique_fields)\n         if self.returning_fields and self.connection.features.can_return_columns_from_insert:\n             if self.connection.features.can_return_rows_from_bulk_insert:\n                 result.append(self.connection.ops.bulk_insert_sql(fields, placeholder_rows))\n", "normalized_occurrence": 1}
