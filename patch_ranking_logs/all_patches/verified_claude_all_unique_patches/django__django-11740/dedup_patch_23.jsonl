{"model_name_or_path": "agentless_claude", "instance_id": "django__django-11740", "model_patch": "diff --git a/django/db/migrations/autodetector.py b/django/db/migrations/autodetector.py\nindex 816737e..972f86a 100644\n--- a/django/db/migrations/autodetector.py\n+++ b/django/db/migrations/autodetector.py\n@@ -963,6 +963,13 @@ class MigrationAutodetector:\n                             preserve_default = False\n                     else:\n                         field = new_field\n+                    # Add dependencies if converting to ForeignKey\n+                    if (not isinstance(old_field, models.ForeignKey) and \n+                        isinstance(new_field, models.ForeignKey)):\n+                        dependencies = self._get_dependencies_for_foreign_key(new_field)\n+                        for dep in dependencies:\n+                            self.add_dependency(app_label, model_name, *dep)\n+                    \n                     self.add_operation(\n                         app_label,\n                         operations.AlterField(\n", "occurrence": 1, "normalized_patch": "diff --git a/django/db/migrations/autodetector.py b/django/db/migrations/autodetector.py\nindex 9fda64b..eb560eb 100644\n--- a/django/db/migrations/autodetector.py\n+++ b/django/db/migrations/autodetector.py\n@@ -468,6 +468,10 @@ class MigrationAutodetector:\n                             preserve_default = False\n                     else:\n                         field = new_field\n+                    if not isinstance(old_field, models.ForeignKey) and isinstance(new_field, models.ForeignKey):\n+                        dependencies = self._get_dependencies_for_foreign_key(new_field)\n+                        for dep in dependencies:\n+                            self.add_dependency(app_label, model_name, *dep)\n                     self.add_operation(app_label, operations.AlterField(model_name=model_name, name=field_name, field=field, preserve_default=preserve_default))\n                 else:\n                     self._generate_removed_field(app_label, model_name, field_name)\n", "normalized_occurrence": 1}
