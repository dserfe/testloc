{"model_name_or_path": "agentless", "instance_id": "sphinx-doc__sphinx-10673", "model_patch": "diff --git a/sphinx/environment/adapters/toctree.py b/sphinx/environment/adapters/toctree.py\nindex 52ac0d3..61daaa3 100644\n--- a/sphinx/environment/adapters/toctree.py\n+++ b/sphinx/environment/adapters/toctree.py\n@@ -158,11 +158,24 @@ class TocTree:\n                                 if refnode['refuri'] == ref and \\\n                                    not refnode['anchorname']:\n                                     refnode.children = [nodes.Text(title)]\n-                    if not toc.children:\n-                        # empty toc means: no titles will show up in the toctree\n-                        logger.warning(__('toctree contains reference to document %r that '\n-                                          'doesn\\'t have a title: no link will be generated'),\n-                                       ref, location=toctreenode)\n+                    if ref in ('genindex', 'modindex', 'search'):\n+                        if ref == 'genindex' and self.env.config.html_use_index:\n+                            title = title or _('General Index')\n+                            toc = nodes.bullet_list('', nodes.list_item('', nodes.compact_paragraph('', nodes.reference('', title, internal=True, refuri=ref))))\n+                        elif ref == 'modindex' and self.env.config.html_use_modindex:\n+                            title = title or _('Module Index')\n+                            toc = nodes.bullet_list('', nodes.list_item('', nodes.compact_paragraph('', nodes.reference('', title, internal=True, refuri=ref))))\n+                        elif ref == 'search' and self.env.config.html_use_search:\n+                            title = title or _('Search')\n+                            toc = nodes.bullet_list('', nodes.list_item('', nodes.compact_paragraph('', nodes.reference('', title, internal=True, refuri=ref))))\n+                        else:\n+                            toc = nodes.bullet_list()\n+                    else:\n+                        if not toc.children:\n+                            # empty toc means: no titles will show up in the toctree\n+                            logger.warning(__('toctree contains reference to document %r that '\n+                                              'doesn\\'t have a title: no link will be generated'),\n+                                           ref, location=toctreenode)\n                 except KeyError:\n                     # this is raised if the included file does not exist\n                     if excluded(self.env.doc2path(ref, False)):\n", "occurrence": 1, "normalized_patch": "diff --git a/sphinx/environment/adapters/toctree.py b/sphinx/environment/adapters/toctree.py\nindex 07fcee3..f1f6902 100644\n--- a/sphinx/environment/adapters/toctree.py\n+++ b/sphinx/environment/adapters/toctree.py\n@@ -83,7 +83,19 @@ class TocTree:\n                             for refnode in child.findall(nodes.reference):\n                                 if refnode['refuri'] == ref and (not refnode['anchorname']):\n                                     refnode.children = [nodes.Text(title)]\n-                    if not toc.children:\n+                    if ref in ('genindex', 'modindex', 'search'):\n+                        if ref == 'genindex' and self.env.config.html_use_index:\n+                            title = title or _('General Index')\n+                            toc = nodes.bullet_list('', nodes.list_item('', nodes.compact_paragraph('', nodes.reference('', title, internal=True, refuri=ref))))\n+                        elif ref == 'modindex' and self.env.config.html_use_modindex:\n+                            title = title or _('Module Index')\n+                            toc = nodes.bullet_list('', nodes.list_item('', nodes.compact_paragraph('', nodes.reference('', title, internal=True, refuri=ref))))\n+                        elif ref == 'search' and self.env.config.html_use_search:\n+                            title = title or _('Search')\n+                            toc = nodes.bullet_list('', nodes.list_item('', nodes.compact_paragraph('', nodes.reference('', title, internal=True, refuri=ref))))\n+                        else:\n+                            toc = nodes.bullet_list()\n+                    elif not toc.children:\n                         logger.warning(__(\"toctree contains reference to document %r that doesn't have a title: no link will be generated\"), ref, location=toctreenode)\n                 except KeyError:\n                     if excluded(self.env.doc2path(ref, False)):\n", "normalized_occurrence": 1}
