{"model_name_or_path": "agentless_claude", "instance_id": "matplotlib__matplotlib-23987", "model_patch": "diff --git a/lib/matplotlib/figure.py b/lib/matplotlib/figure.py\nindex 71845c8..2239e77 100644\n--- a/lib/matplotlib/figure.py\n+++ b/lib/matplotlib/figure.py\n@@ -3427,12 +3427,21 @@ class Figure(FigureBase):\n         .Figure.set_layout_engine\n         .pyplot.tight_layout\n         \"\"\"\n+        from ._tight_layout import get_subplotspec_list\n+        current_engine = self.get_layout_engine()\n+        # Only warn if there's an existing engine that's not adjust_compatible\n+        if current_engine is not None and not current_engine._adjust_compatible:\n+            _api.warn_external(\n+                \"This figure was using a layout engine that is incompatible with \"\n+                \"tight_layout; removing it.\")\n+            self.set_layout_engine(None)\n+            \n         from ._tight_layout import get_subplotspec_list\n         subplotspec_list = get_subplotspec_list(self.axes)\n         if None in subplotspec_list:\n             _api.warn_external(\"This figure includes Axes that are not \"\n-                               \"compatible with tight_layout, so results \"\n-                               \"might be incorrect.\")\n+                             \"compatible with tight_layout, so results \"\n+                             \"might be incorrect.\")\n         # note that here we do not permanently set the figures engine to\n         # tight_layout but rather just perform the layout in place and remove\n         # any previous engines.\n", "occurrence": 1, "normalized_patch": "diff --git a/lib/matplotlib/figure.py b/lib/matplotlib/figure.py\nindex 57abfc4..9724e9d 100644\n--- a/lib/matplotlib/figure.py\n+++ b/lib/matplotlib/figure.py\n@@ -1021,6 +1021,11 @@ class Figure(FigureBase):\n         return self.get_layout_engine().execute(self)\n     def tight_layout(self, *, pad=1.08, h_pad=None, w_pad=None, rect=None):\n         from ._tight_layout import get_subplotspec_list\n+        current_engine = self.get_layout_engine()\n+        if current_engine is not None and (not current_engine._adjust_compatible):\n+            _api.warn_external('This figure was using a layout engine that is incompatible with tight_layout; removing it.')\n+            self.set_layout_engine(None)\n+        from ._tight_layout import get_subplotspec_list\n         subplotspec_list = get_subplotspec_list(self.axes)\n         if None in subplotspec_list:\n             _api.warn_external('This figure includes Axes that are not compatible with tight_layout, so results might be incorrect.')\n", "normalized_occurrence": 1}
