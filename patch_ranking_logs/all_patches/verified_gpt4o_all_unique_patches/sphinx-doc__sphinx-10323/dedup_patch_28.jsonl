{"model_name_or_path": "agentless", "instance_id": "sphinx-doc__sphinx-10323", "model_patch": "diff --git a/sphinx/directives/code.py b/sphinx/directives/code.py\nindex 2bf31d0..b9aadaf 100644\n--- a/sphinx/directives/code.py\n+++ b/sphinx/directives/code.py\n@@ -343,8 +343,19 @@ class LiteralIncludeReader:\n     def prepend_filter(self, lines: List[str], location: Tuple[str, int] = None) -> List[str]:\n         prepend = self.options.get('prepend')\n         if prepend:\n-            lines.insert(0, prepend + '\\n')\n-\n+            # Determine the indentation of the first line of the snippet\n+            leading_whitespace = \"\"\n+            first_line = lines[0]\n+            for char in first_line:\n+                if char.isspace():\n+                    leading_whitespace += char\n+                else:\n+                    break\n+            \n+            # Prepend the text with matching indentation\n+            indented_prepend = leading_whitespace + prepend + '\\n'\n+            lines.insert(0, indented_prepend)\n+        \n         return lines\n \n     def append_filter(self, lines: List[str], location: Tuple[str, int] = None) -> List[str]:\n", "occurrence": 1, "normalized_patch": "diff --git a/sphinx/directives/code.py b/sphinx/directives/code.py\nindex 15cdcaf..db435ec 100644\n--- a/sphinx/directives/code.py\n+++ b/sphinx/directives/code.py\n@@ -226,7 +226,15 @@ class LiteralIncludeReader:\n     def prepend_filter(self, lines: List[str], location: Tuple[str, int]=None) -> List[str]:\n         prepend = self.options.get('prepend')\n         if prepend:\n-            lines.insert(0, prepend + '\\n')\n+            leading_whitespace = ''\n+            first_line = lines[0]\n+            for char in first_line:\n+                if char.isspace():\n+                    leading_whitespace += char\n+                else:\n+                    break\n+            indented_prepend = leading_whitespace + prepend + '\\n'\n+            lines.insert(0, indented_prepend)\n         return lines\n     def append_filter(self, lines: List[str], location: Tuple[str, int]=None) -> List[str]:\n         append = self.options.get('append')\n", "normalized_occurrence": 1}
