{"model_name_or_path": "agentless_claude", "instance_id": "django__django-13128", "model_patch": "diff --git a/django/db/models/expressions.py b/django/db/models/expressions.py\nindex 215532d..95872ca 100644\n--- a/django/db/models/expressions.py\n+++ b/django/db/models/expressions.py\n@@ -503,6 +503,13 @@ class DurationExpression(CombinedExpression):\n         sql, params = self.compile(self.rhs, compiler, connection)\n         expressions.append(sql)\n         expression_params.extend(params)\n+        \n+        # Special handling for temporal subtraction\n+        if (self.connector == self.SUB and \n+            isinstance(self.lhs.output_field, fields.DateTimeField) and \n+            isinstance(self.rhs.output_field, fields.DateTimeField)):\n+            return TemporalSubtraction(self.lhs, self.rhs).as_sql(compiler, connection)\n+            \n         # order of precedence\n         expression_wrapper = '(%s)'\n         sql = connection.ops.combine_duration_expression(self.connector, expressions)\n", "occurrence": 1, "normalized_patch": "diff --git a/django/db/models/expressions.py b/django/db/models/expressions.py\nindex ae5c73e..f849876 100644\n--- a/django/db/models/expressions.py\n+++ b/django/db/models/expressions.py\n@@ -290,6 +290,8 @@ class DurationExpression(CombinedExpression):\n         sql, params = self.compile(self.rhs, compiler, connection)\n         expressions.append(sql)\n         expression_params.extend(params)\n+        if self.connector == self.SUB and isinstance(self.lhs.output_field, fields.DateTimeField) and isinstance(self.rhs.output_field, fields.DateTimeField):\n+            return TemporalSubtraction(self.lhs, self.rhs).as_sql(compiler, connection)\n         expression_wrapper = '(%s)'\n         sql = connection.ops.combine_duration_expression(self.connector, expressions)\n         return (expression_wrapper % sql, expression_params)\n", "normalized_occurrence": 1}
