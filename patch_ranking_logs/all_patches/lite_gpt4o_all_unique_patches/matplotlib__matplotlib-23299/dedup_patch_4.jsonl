{"model_name_or_path": "agentless", "instance_id": "matplotlib__matplotlib-23299", "model_patch": "diff --git a/lib/matplotlib/_pylab_helpers.py b/lib/matplotlib/_pylab_helpers.py\nindex 3123d3a..54132ce 100644\n--- a/lib/matplotlib/_pylab_helpers.py\n+++ b/lib/matplotlib/_pylab_helpers.py\n@@ -1,3 +1,4 @@\n+\n \"\"\"\n Manage figures for the pyplot interface.\n \"\"\"\n@@ -86,8 +87,10 @@ class Gcf:\n         # during interpreter shutdown.\n         import gc\n         for manager in list(cls.figs.values()):\n-            manager.canvas.mpl_disconnect(manager._cidgcf)\n-            manager.destroy()\n+            if hasattr(manager, \"_cidgcf\"):\n+                manager.canvas.mpl_disconnect(manager._cidgcf)\n+            if hasattr(manager, \"destroy\"):\n+                manager.destroy()\n         cls.figs.clear()\n         gc.collect(1)\n \n@@ -141,4 +144,4 @@ class Gcf:\n                 manager.canvas.draw_idle()\n \n \n-atexit.register(Gcf.destroy_all)\n+atexit.register(Gcf.destroy_all)\n", "occurrence": 1, "normalized_patch": "diff --git a/lib/matplotlib/_pylab_helpers.py b/lib/matplotlib/_pylab_helpers.py\nindex 75c28d8..0d0c4eb 100644\n--- a/lib/matplotlib/_pylab_helpers.py\n+++ b/lib/matplotlib/_pylab_helpers.py\n@@ -34,8 +34,10 @@ class Gcf:\n     def destroy_all(cls):\n         import gc\n         for manager in list(cls.figs.values()):\n-            manager.canvas.mpl_disconnect(manager._cidgcf)\n-            manager.destroy()\n+            if hasattr(manager, '_cidgcf'):\n+                manager.canvas.mpl_disconnect(manager._cidgcf)\n+            if hasattr(manager, 'destroy'):\n+                manager.destroy()\n         cls.figs.clear()\n         gc.collect(1)\n     @classmethod\n", "normalized_occurrence": 1}
