{"model_name_or_path": "agentless", "instance_id": "sympy__sympy-13031", "model_patch": "diff --git a/sympy/matrices/expressions/blockmatrix.py b/sympy/matrices/expressions/blockmatrix.py\nindex a79ab56..f78edf9 100644\n--- a/sympy/matrices/expressions/blockmatrix.py\n+++ b/sympy/matrices/expressions/blockmatrix.py\n@@ -56,10 +56,17 @@ class BlockMatrix(MatrixExpr):\n     def shape(self):\n         numrows = numcols = 0\n         M = self.blocks\n-        for i in range(M.shape[0]):\n-            numrows += M[i, 0].shape[0]\n-        for i in range(M.shape[1]):\n-            numcols += M[0, i].shape[1]\n+        if M.shape[0] == 0:\n+            numrows = 0\n+        else:\n+            for i in range(M.shape[0]):\n+                numrows += M[i, 0].shape[0]\n+\n+        if M.shape[1] == 0:\n+            numcols = sum([M[0, i].shape[1] for i in range(M.shape[1])])\n+        else:\n+            for i in range(M.shape[1]):\n+                numcols += M[0, i].shape[1]\n         return (numrows, numcols)\n \n     @property\n", "occurrence": 1, "normalized_patch": "diff --git a/sympy/matrices/expressions/blockmatrix.py b/sympy/matrices/expressions/blockmatrix.py\nindex e9f8bf4..43d0199 100644\n--- a/sympy/matrices/expressions/blockmatrix.py\n+++ b/sympy/matrices/expressions/blockmatrix.py\n@@ -26,10 +26,16 @@ class BlockMatrix(MatrixExpr):\n     def shape(self):\n         numrows = numcols = 0\n         M = self.blocks\n-        for i in range(M.shape[0]):\n-            numrows += M[i, 0].shape[0]\n-        for i in range(M.shape[1]):\n-            numcols += M[0, i].shape[1]\n+        if M.shape[0] == 0:\n+            numrows = 0\n+        else:\n+            for i in range(M.shape[0]):\n+                numrows += M[i, 0].shape[0]\n+        if M.shape[1] == 0:\n+            numcols = sum([M[0, i].shape[1] for i in range(M.shape[1])])\n+        else:\n+            for i in range(M.shape[1]):\n+                numcols += M[0, i].shape[1]\n         return (numrows, numcols)\n     @property\n     def blockshape(self):\n", "normalized_occurrence": 1}
