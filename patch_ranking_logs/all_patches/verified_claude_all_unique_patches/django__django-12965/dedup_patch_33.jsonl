{"model_name_or_path": "agentless_claude", "instance_id": "django__django-12965", "model_patch": "diff --git a/django/db/models/sql/compiler.py b/django/db/models/sql/compiler.py\nindex 7c860dc..e297798 100644\n--- a/django/db/models/sql/compiler.py\n+++ b/django/db/models/sql/compiler.py\n@@ -1424,7 +1424,13 @@ class SQLDeleteCompiler(SQLCompiler):\n         parameters.\n         \"\"\"\n         if self.single_alias:\n-            return self._as_sql(self.query)\n+            # For single table delete without subqueries, use simple DELETE\n+            if not self.query.where.children and not self.query.having and not self.query.extra_tables:\n+                return self._as_sql(self.query)\n+            # For single table delete with where clause, use simple DELETE with WHERE\n+            if not self.query.having and not self.query.extra_tables:\n+                return self._as_sql(self.query)\n+        # For complex queries, use subquery\n         innerq = self.query.clone()\n         innerq.__class__ = Query\n         innerq.clear_select_clause()\n", "occurrence": 1, "normalized_patch": "diff --git a/django/db/models/sql/compiler.py b/django/db/models/sql/compiler.py\nindex 8178df0..3494fe0 100644\n--- a/django/db/models/sql/compiler.py\n+++ b/django/db/models/sql/compiler.py\n@@ -799,7 +799,10 @@ class SQLDeleteCompiler(SQLCompiler):\n         return (' '.join(result), tuple(params))\n     def as_sql(self):\n         if self.single_alias:\n-            return self._as_sql(self.query)\n+            if not self.query.where.children and (not self.query.having) and (not self.query.extra_tables):\n+                return self._as_sql(self.query)\n+            if not self.query.having and (not self.query.extra_tables):\n+                return self._as_sql(self.query)\n         innerq = self.query.clone()\n         innerq.__class__ = Query\n         innerq.clear_select_clause()\n", "normalized_occurrence": 1}
