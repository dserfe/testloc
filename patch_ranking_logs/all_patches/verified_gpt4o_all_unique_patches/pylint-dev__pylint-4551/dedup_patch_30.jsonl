{"model_name_or_path": "agentless", "instance_id": "pylint-dev__pylint-4551", "model_patch": "diff --git a/pylint/pyreverse/inspector.py b/pylint/pyreverse/inspector.py\nindex 4a79e89..d4df4d7 100644\n--- a/pylint/pyreverse/inspector.py\n+++ b/pylint/pyreverse/inspector.py\n@@ -199,17 +199,9 @@ class Linker(IdGeneratorMixIn, utils.LocalsVisitor):\n         if hasattr(node, \"_handled\"):\n             return\n         node._handled = True\n-        if node.name in node.frame():\n-            frame = node.frame()\n-        else:\n-            # the name has been defined as 'global' in the frame and belongs\n-            # there.\n-            frame = node.root()\n+        frame = node.frame()\n         try:\n             if not hasattr(frame, \"locals_type\"):\n-                # If the frame doesn't have a locals_type yet,\n-                # it means it wasn't yet visited. Visit it now\n-                # to add what's missing from it.\n                 if isinstance(frame, astroid.ClassDef):\n                     self.visit_classdef(frame)\n                 elif isinstance(frame, astroid.FunctionDef):\n@@ -219,10 +211,23 @@ class Linker(IdGeneratorMixIn, utils.LocalsVisitor):\n \n             current = frame.locals_type[node.name]\n             values = set(node.infer())\n+            if node.annotation:\n+                annotated_type = self._handle_annotation(node.annotation)\n+                values.add(annotated_type)\n             frame.locals_type[node.name] = list(set(current) | values)\n         except astroid.InferenceError:\n             pass\n \n+    def _handle_annotation(self, annotation_node):\n+        \"\"\"Handle annotations for type hints.\"\"\"\n+        try:\n+            inferred = next(annotation_node.infer())\n+            if isinstance(inferred, astroid.ClassDef):\n+                return inferred.qname()\n+        except astroid.InferenceError:\n+            pass\n+        return None\n+\n     @staticmethod\n     def handle_assignattr_type(node, parent):\n         \"\"\"handle an astroid.assignattr node\n", "occurrence": 1, "normalized_patch": "diff --git a/pylint/pyreverse/inspector.py b/pylint/pyreverse/inspector.py\nindex 540b86a..196115c 100644\n--- a/pylint/pyreverse/inspector.py\n+++ b/pylint/pyreverse/inspector.py\n@@ -97,10 +97,7 @@ class Linker(IdGeneratorMixIn, utils.LocalsVisitor):\n         if hasattr(node, '_handled'):\n             return\n         node._handled = True\n-        if node.name in node.frame():\n-            frame = node.frame()\n-        else:\n-            frame = node.root()\n+        frame = node.frame()\n         try:\n             if not hasattr(frame, 'locals_type'):\n                 if isinstance(frame, astroid.ClassDef):\n@@ -111,9 +108,20 @@ class Linker(IdGeneratorMixIn, utils.LocalsVisitor):\n                     self.visit_module(frame)\n             current = frame.locals_type[node.name]\n             values = set(node.infer())\n+            if node.annotation:\n+                annotated_type = self._handle_annotation(node.annotation)\n+                values.add(annotated_type)\n             frame.locals_type[node.name] = list(set(current) | values)\n         except astroid.InferenceError:\n             pass\n+    def _handle_annotation(self, annotation_node):\n+        try:\n+            inferred = next(annotation_node.infer())\n+            if isinstance(inferred, astroid.ClassDef):\n+                return inferred.qname()\n+        except astroid.InferenceError:\n+            pass\n+        return None\n     @staticmethod\n     def handle_assignattr_type(node, parent):\n         try:\n", "normalized_occurrence": 1}
