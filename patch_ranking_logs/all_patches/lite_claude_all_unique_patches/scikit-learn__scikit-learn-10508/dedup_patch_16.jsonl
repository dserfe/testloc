{"model_name_or_path": "agentless_claude", "instance_id": "scikit-learn__scikit-learn-10508", "model_patch": "diff --git a/sklearn/preprocessing/label.py b/sklearn/preprocessing/label.py\nindex 8d1b39c..e1788bb 100644\n--- a/sklearn/preprocessing/label.py\n+++ b/sklearn/preprocessing/label.py\n@@ -126,13 +126,17 @@ class LabelEncoder(BaseEstimator, TransformerMixin):\n         \"\"\"\n         check_is_fitted(self, 'classes_')\n         y = column_or_1d(y, warn=True)\n-\n+        \n+        # Handle empty arrays\n+        if len(y) == 0:\n+            return np.array([], dtype=np.int64)\n+            \n         classes = np.unique(y)\n         if len(np.intersect1d(classes, self.classes_)) < len(classes):\n             diff = np.setdiff1d(classes, self.classes_)\n             raise ValueError(\n                     \"y contains previously unseen labels: %s\" % str(diff))\n-        return np.searchsorted(self.classes_, y)\n+        return np.searchsorted(self.classes_, y.astype(self.classes_.dtype))\n \n     def inverse_transform(self, y):\n         \"\"\"Transform labels back to original encoding.\n", "occurrence": 1, "normalized_patch": "diff --git a/sklearn/preprocessing/label.py b/sklearn/preprocessing/label.py\nindex 7e12a65..e40e158 100644\n--- a/sklearn/preprocessing/label.py\n+++ b/sklearn/preprocessing/label.py\n@@ -27,11 +27,13 @@ class LabelEncoder(BaseEstimator, TransformerMixin):\n     def transform(self, y):\n         check_is_fitted(self, 'classes_')\n         y = column_or_1d(y, warn=True)\n+        if len(y) == 0:\n+            return np.array([], dtype=np.int64)\n         classes = np.unique(y)\n         if len(np.intersect1d(classes, self.classes_)) < len(classes):\n             diff = np.setdiff1d(classes, self.classes_)\n             raise ValueError('y contains previously unseen labels: %s' % str(diff))\n-        return np.searchsorted(self.classes_, y)\n+        return np.searchsorted(self.classes_, y.astype(self.classes_.dtype))\n     def inverse_transform(self, y):\n         check_is_fitted(self, 'classes_')\n         diff = np.setdiff1d(y, np.arange(len(self.classes_)))\n", "normalized_occurrence": 1}
