{"model_name_or_path": "agentless_claude", "instance_id": "django__django-11820", "model_patch": "diff --git a/django/db/models/options.py b/django/db/models/options.py\nindex d3ae0cf..532e9ca 100644\n--- a/django/db/models/options.py\n+++ b/django/db/models/options.py\n@@ -235,6 +235,32 @@ class Options:\n             self.ordering = ('_order',)\n             if not any(isinstance(field, OrderWrt) for field in model._meta.local_fields):\n                 model.add_to_class('_order', OrderWrt())\n+                \n+        # Process ordering to handle __pk lookups\n+        if self.ordering:\n+            processed_ordering = []\n+            for field_name in self.ordering:\n+                # Skip expressions and other non-string values\n+                if not isinstance(field_name, str):\n+                    processed_ordering.append(field_name)\n+                    continue\n+                    \n+                # Handle descending prefix\n+                desc_prefix = ''\n+                if field_name.startswith('-'):\n+                    desc_prefix = '-'\n+                    field_name = field_name[1:]\n+                    \n+                # Handle related field pk lookups\n+                if '__pk' in field_name:\n+                    parts = field_name.split('__')\n+                    if len(parts) == 2 and parts[1] == 'pk':\n+                        # Convert to id for compatibility\n+                        field_name = f\"{parts[0]}__id\"\n+                        \n+                processed_ordering.append(f\"{desc_prefix}{field_name}\")\n+                \n+            self.ordering = tuple(processed_ordering)\n         else:\n             self.order_with_respect_to = None\n \n@@ -852,4 +878,4 @@ class Options:\n         return [\n             field for field in self._get_fields(forward=True, reverse=False, include_parents=PROXY_PARENTS)\n             if getattr(field, 'db_returning', False)\n-        ]\n+        ]\n", "occurrence": 1, "normalized_patch": "diff --git a/django/db/models/options.py b/django/db/models/options.py\nindex 3b361a9..2173462 100644\n--- a/django/db/models/options.py\n+++ b/django/db/models/options.py\n@@ -145,6 +145,22 @@ class Options:\n             self.ordering = ('_order',)\n             if not any((isinstance(field, OrderWrt) for field in model._meta.local_fields)):\n                 model.add_to_class('_order', OrderWrt())\n+        if self.ordering:\n+            processed_ordering = []\n+            for field_name in self.ordering:\n+                if not isinstance(field_name, str):\n+                    processed_ordering.append(field_name)\n+                    continue\n+                desc_prefix = ''\n+                if field_name.startswith('-'):\n+                    desc_prefix = '-'\n+                    field_name = field_name[1:]\n+                if '__pk' in field_name:\n+                    parts = field_name.split('__')\n+                    if len(parts) == 2 and parts[1] == 'pk':\n+                        field_name = f'{parts[0]}__id'\n+                processed_ordering.append(f'{desc_prefix}{field_name}')\n+            self.ordering = tuple(processed_ordering)\n         else:\n             self.order_with_respect_to = None\n         if self.pk is None:\n", "normalized_occurrence": 1}
