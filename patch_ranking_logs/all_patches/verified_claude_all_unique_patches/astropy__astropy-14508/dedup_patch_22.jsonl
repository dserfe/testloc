{"model_name_or_path": "agentless_claude", "instance_id": "astropy__astropy-14508", "model_patch": "diff --git a/astropy/io/fits/card.py b/astropy/io/fits/card.py\nindex 471c162..9c255e7 100644\n--- a/astropy/io/fits/card.py\n+++ b/astropy/io/fits/card.py\n@@ -1299,7 +1299,13 @@ def _format_value(value):\n \n def _format_float(value):\n     \"\"\"Format a floating number to make sure it gets the decimal point.\"\"\"\n-    value_str = f\"{value:.16G}\"\n+    # First try the default string representation\n+    value_str = str(value)\n+    # Verify this string accurately represents the value\n+    if float(value_str) != value:\n+        # Fall back to high precision format if needed\n+        value_str = f\"{value:.16G}\"\n+    \n     if \".\" not in value_str and \"E\" not in value_str:\n         value_str += \".0\"\n     elif \"E\" in value_str:\n", "occurrence": 1, "normalized_patch": "diff --git a/astropy/io/fits/card.py b/astropy/io/fits/card.py\nindex 2109132..544b286 100644\n--- a/astropy/io/fits/card.py\n+++ b/astropy/io/fits/card.py\n@@ -655,7 +655,9 @@ def _format_value(value):\n     else:\n         return ''\n def _format_float(value):\n-    value_str = f'{value:.16G}'\n+    value_str = str(value)\n+    if float(value_str) != value:\n+        value_str = f'{value:.16G}'\n     if '.' not in value_str and 'E' not in value_str:\n         value_str += '.0'\n     elif 'E' in value_str:\n", "normalized_occurrence": 4}
