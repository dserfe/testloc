{"model_name_or_path": "agentless", "instance_id": "matplotlib__matplotlib-25079", "model_patch": "diff --git a/lib/matplotlib/cm.py b/lib/matplotlib/cm.py\nindex 06f543d..5a8e0e2 100644\n--- a/lib/matplotlib/cm.py\n+++ b/lib/matplotlib/cm.py\n@@ -581,9 +581,13 @@ class ScalarMappable:\n         cmap : `.Colormap` or str or None\n         \"\"\"\n         in_init = self.cmap is None\n+        self.colorbars = []\n \n         self.cmap = _ensure_cmap(cmap)\n         if not in_init:\n+            # Update colorbar if it exists\n+            for cb in self.colorbars:\n+                cb.update_normal(self)\n             self.changed()  # Things are not set up properly yet.\n \n     @property\n@@ -612,11 +616,17 @@ class ScalarMappable:\n         in_init = self.norm is None\n         # Remove the current callback and connect to the new one\n         if not in_init:\n+            # Update colorbar if it exists\n+            for cb in self.colorbars:\n+                cb.update_normal(self)\n             self.norm.callbacks.disconnect(self._id_norm)\n         self._norm = norm\n         self._id_norm = self.norm.callbacks.connect('changed',\n                                                     self.changed)\n         if not in_init:\n+            # Update colorbar if it exists\n+            for cb in self.colorbars:\n+                cb.update_normal(self)\n             self.changed()\n \n     def set_norm(self, norm):\n", "occurrence": 1, "normalized_patch": "diff --git a/lib/matplotlib/cm.py b/lib/matplotlib/cm.py\nindex f5a7578..7f3ff27 100644\n--- a/lib/matplotlib/cm.py\n+++ b/lib/matplotlib/cm.py\n@@ -168,8 +168,11 @@ class ScalarMappable:\n         return 1.0\n     def set_cmap(self, cmap):\n         in_init = self.cmap is None\n+        self.colorbars = []\n         self.cmap = _ensure_cmap(cmap)\n         if not in_init:\n+            for cb in self.colorbars:\n+                cb.update_normal(self)\n             self.changed()\n     @property\n     def norm(self):\n@@ -189,10 +192,14 @@ class ScalarMappable:\n             return\n         in_init = self.norm is None\n         if not in_init:\n+            for cb in self.colorbars:\n+                cb.update_normal(self)\n             self.norm.callbacks.disconnect(self._id_norm)\n         self._norm = norm\n         self._id_norm = self.norm.callbacks.connect('changed', self.changed)\n         if not in_init:\n+            for cb in self.colorbars:\n+                cb.update_normal(self)\n             self.changed()\n     def set_norm(self, norm):\n         self.norm = norm\n", "normalized_occurrence": 1}
