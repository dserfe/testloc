{"model_name_or_path": "agentless_claude", "instance_id": "sympy__sympy-17630", "model_patch": "diff --git a/sympy/matrices/expressions/matmul.py b/sympy/matrices/expressions/matmul.py\nindex bc38a10..e504ba0 100644\n--- a/sympy/matrices/expressions/matmul.py\n+++ b/sympy/matrices/expressions/matmul.py\n@@ -217,9 +217,10 @@ def newmul(*args):\n     return new(MatMul, *args)\n \n def any_zeros(mul):\n-    if any([arg.is_zero or (arg.is_Matrix and arg.is_ZeroMatrix)\n-                       for arg in mul.args]):\n-        matrices = [arg for arg in mul.args if arg.is_Matrix]\n+    if any([(arg.is_Matrix and arg.is_ZeroMatrix) or\n+            (hasattr(arg, 'is_zero') and arg.is_zero and hasattr(arg, 'rows') and hasattr(arg, 'cols'))\n+            for arg in mul.args]):\n+        matrices = [arg for arg in mul.args if hasattr(arg, 'rows') and hasattr(arg, 'cols')]\n         return ZeroMatrix(matrices[0].rows, matrices[-1].cols)\n     return mul\n \n", "occurrence": 1, "normalized_patch": "diff --git a/sympy/matrices/expressions/matmul.py b/sympy/matrices/expressions/matmul.py\nindex e0bcc69..c3c7122 100644\n--- a/sympy/matrices/expressions/matmul.py\n+++ b/sympy/matrices/expressions/matmul.py\n@@ -131,8 +131,8 @@ def newmul(*args):\n         args = args[1:]\n     return new(MatMul, *args)\n def any_zeros(mul):\n-    if any([arg.is_zero or (arg.is_Matrix and arg.is_ZeroMatrix) for arg in mul.args]):\n-        matrices = [arg for arg in mul.args if arg.is_Matrix]\n+    if any([arg.is_Matrix and arg.is_ZeroMatrix or (hasattr(arg, 'is_zero') and arg.is_zero and hasattr(arg, 'rows') and hasattr(arg, 'cols')) for arg in mul.args]):\n+        matrices = [arg for arg in mul.args if hasattr(arg, 'rows') and hasattr(arg, 'cols')]\n         return ZeroMatrix(matrices[0].rows, matrices[-1].cols)\n     return mul\n def merge_explicit(matmul):\n", "normalized_occurrence": 1}
