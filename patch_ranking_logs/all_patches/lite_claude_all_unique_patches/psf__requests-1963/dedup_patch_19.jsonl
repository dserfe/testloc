{"model_name_or_path": "agentless_claude", "instance_id": "psf__requests-1963", "model_patch": "diff --git a/requests/sessions.py b/requests/sessions.py\nindex 7fdc4a9..a3fe107 100644\n--- a/requests/sessions.py\n+++ b/requests/sessions.py\n@@ -86,10 +86,9 @@ class SessionRedirectMixin(object):\n         \"\"\"Receives a Response. Returns a generator of Responses.\"\"\"\n \n         i = 0\n-\n+        prepared_request = req.copy()\n+        \n         while resp.is_redirect:\n-            prepared_request = req.copy()\n-\n             resp.content  # Consume socket so it can be released\n \n             if i >= self.max_redirects:\n@@ -182,6 +181,9 @@ class SessionRedirectMixin(object):\n \n             i += 1\n             yield resp\n+            \n+            if resp.is_redirect:\n+                prepared_request = prepared_request.copy()\n \n \n class Session(SessionRedirectMixin):\n", "occurrence": 1, "normalized_patch": "diff --git a/requests/sessions.py b/requests/sessions.py\nindex 3875307..3740d41 100644\n--- a/requests/sessions.py\n+++ b/requests/sessions.py\n@@ -35,8 +35,8 @@ def merge_hooks(request_hooks, session_hooks, dict_class=OrderedDict):\n class SessionRedirectMixin(object):\n     def resolve_redirects(self, resp, req, stream=False, timeout=None, verify=True, cert=None, proxies=None):\n         i = 0\n+        prepared_request = req.copy()\n         while resp.is_redirect:\n-            prepared_request = req.copy()\n             resp.content\n             if i >= self.max_redirects:\n                 raise TooManyRedirects('Exceeded %s redirects.' % self.max_redirects)\n@@ -84,6 +84,8 @@ class SessionRedirectMixin(object):\n             extract_cookies_to_jar(self.cookies, prepared_request, resp.raw)\n             i += 1\n             yield resp\n+            if resp.is_redirect:\n+                prepared_request = prepared_request.copy()\n class Session(SessionRedirectMixin):\n     __attrs__ = ['headers', 'cookies', 'auth', 'timeout', 'proxies', 'hooks', 'params', 'verify', 'cert', 'prefetch', 'adapters', 'stream', 'trust_env', 'max_redirects']\n     def __init__(self):\n", "normalized_occurrence": 1}
