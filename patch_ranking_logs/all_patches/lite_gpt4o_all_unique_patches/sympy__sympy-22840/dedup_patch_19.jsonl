{"model_name_or_path": "agentless", "instance_id": "sympy__sympy-22840", "model_patch": "diff --git a/sympy/simplify/cse_main.py b/sympy/simplify/cse_main.py\nindex fa99708..721fc21 100644\n--- a/sympy/simplify/cse_main.py\n+++ b/sympy/simplify/cse_main.py\n@@ -580,7 +580,7 @@ def tree_cse(exprs, symbols, opt_subs=None, order='canonical', ignore=()):\n     excluded_symbols = set()\n \n     def _find_repeated(expr):\n-        if not isinstance(expr, (Basic, Unevaluated)):\n+        if not isinstance(expr, (Basic, Unevaluated, MatrixSymbol)):\n             return\n \n         if isinstance(expr, RootOf):\n@@ -626,7 +626,7 @@ def tree_cse(exprs, symbols, opt_subs=None, order='canonical', ignore=()):\n     subs = dict()\n \n     def _rebuild(expr):\n-        if not isinstance(expr, (Basic, Unevaluated)):\n+        if not isinstance(expr, (Basic, Unevaluated, MatrixSymbol)):\n             return expr\n \n         if not expr.args:\n", "occurrence": 1, "normalized_patch": "diff --git a/sympy/simplify/cse_main.py b/sympy/simplify/cse_main.py\nindex d5cc8d7..35f143b 100644\n--- a/sympy/simplify/cse_main.py\n+++ b/sympy/simplify/cse_main.py\n@@ -222,7 +222,7 @@ def tree_cse(exprs, symbols, opt_subs=None, order='canonical', ignore=()):\n     seen_subexp = set()\n     excluded_symbols = set()\n     def _find_repeated(expr):\n-        if not isinstance(expr, (Basic, Unevaluated)):\n+        if not isinstance(expr, (Basic, Unevaluated, MatrixSymbol)):\n             return\n         if isinstance(expr, RootOf):\n             return\n@@ -252,7 +252,7 @@ def tree_cse(exprs, symbols, opt_subs=None, order='canonical', ignore=()):\n     replacements = []\n     subs = dict()\n     def _rebuild(expr):\n-        if not isinstance(expr, (Basic, Unevaluated)):\n+        if not isinstance(expr, (Basic, Unevaluated, MatrixSymbol)):\n             return expr\n         if not expr.args:\n             return expr\n", "normalized_occurrence": 1}
