{"model_name_or_path": "agentless", "instance_id": "sphinx-doc__sphinx-8474", "model_patch": "diff --git a/sphinx/builders/latex/__init__.py b/sphinx/builders/latex/__init__.py\nindex e316785..dc3a23a 100644\n--- a/sphinx/builders/latex/__init__.py\n+++ b/sphinx/builders/latex/__init__.py\n@@ -257,6 +257,15 @@ class LaTeXBuilder(Builder):\n \n     def write(self, *ignored: Any) -> None:\n         docwriter = LaTeXWriter(self)\n+        if self.config.numfig:\n+            self.context['numfig'] = True\n+            self.context['numfig_secnum_depth'] = self.config.numfig_secnum_depth\n+            self.context['figure_caption_prefix'] = self.config.numfig_format.get('figure', 'Fig. %s ')\n+            self.context['table_caption_prefix'] = self.config.numfig_format.get('table', 'Table %s ')\n+            self.context['codeblock_caption_prefix'] = self.config.numfig_format.get('code-block', 'Listing %s ')\n+        else:\n+            self.context['numfig'] = False\n+\n         docsettings = OptionParser(\n             defaults=self.env.settings,\n             components=(docwriter,),\n", "occurrence": 1, "normalized_patch": "diff --git a/sphinx/builders/latex/__init__.py b/sphinx/builders/latex/__init__.py\nindex 7d628f1..308290c 100644\n--- a/sphinx/builders/latex/__init__.py\n+++ b/sphinx/builders/latex/__init__.py\n@@ -135,6 +135,14 @@ class LaTeXBuilder(Builder):\n             f.write(highlighter.get_stylesheet())\n     def write(self, *ignored: Any) -> None:\n         docwriter = LaTeXWriter(self)\n+        if self.config.numfig:\n+            self.context['numfig'] = True\n+            self.context['numfig_secnum_depth'] = self.config.numfig_secnum_depth\n+            self.context['figure_caption_prefix'] = self.config.numfig_format.get('figure', 'Fig. %s ')\n+            self.context['table_caption_prefix'] = self.config.numfig_format.get('table', 'Table %s ')\n+            self.context['codeblock_caption_prefix'] = self.config.numfig_format.get('code-block', 'Listing %s ')\n+        else:\n+            self.context['numfig'] = False\n         docsettings = OptionParser(defaults=self.env.settings, components=(docwriter,), read_config_files=True).get_default_values()\n         patch_settings(docsettings)\n         self.init_document_data()\n", "normalized_occurrence": 1}
