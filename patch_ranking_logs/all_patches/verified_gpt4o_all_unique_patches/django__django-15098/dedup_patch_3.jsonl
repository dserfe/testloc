{"model_name_or_path": "agentless", "instance_id": "django__django-15098", "model_patch": "diff --git a/django/utils/translation/trans_real.py b/django/utils/translation/trans_real.py\nindex 488a2d8..1679b50 100644\n--- a/django/utils/translation/trans_real.py\n+++ b/django/utils/translation/trans_real.py\n@@ -483,6 +483,9 @@ def get_supported_language_variant(lang_code, strict=False):\n             pass\n         i = None\n         while (i := lang_code.rfind('-', 0, i)) > -1:\n+            # Avoid breaking script-region codes like 'en-Latn-US'\n+            if lang_code[:i].count('-') == 1 and lang_code[i+1:i+5].isalpha():\n+                continue\n             possible_lang_codes.append(lang_code[:i])\n         generic_lang_code = possible_lang_codes[-1]\n         supported_lang_codes = get_languages()\n@@ -509,10 +512,12 @@ def get_language_from_path(path, strict=False):\n     if not regex_match:\n         return None\n     lang_code = regex_match[1]\n-    try:\n-        return get_supported_language_variant(lang_code, strict=strict)\n-    except LookupError:\n-        return None\n+    if lang_code:\n+        try:\n+            return get_supported_language_variant(lang_code, strict=strict)\n+        except LookupError:\n+            pass\n+    return None\n \n \n def get_language_from_request(request, check_path=False):\n", "occurrence": 1, "normalized_patch": "diff --git a/django/utils/translation/trans_real.py b/django/utils/translation/trans_real.py\nindex 05d14a5..5f37447 100644\n--- a/django/utils/translation/trans_real.py\n+++ b/django/utils/translation/trans_real.py\n@@ -256,6 +256,8 @@ def get_supported_language_variant(lang_code, strict=False):\n             pass\n         i = None\n         while (i := lang_code.rfind('-', 0, i)) > -1:\n+            if lang_code[:i].count('-') == 1 and lang_code[i + 1:i + 5].isalpha():\n+                continue\n             possible_lang_codes.append(lang_code[:i])\n         generic_lang_code = possible_lang_codes[-1]\n         supported_lang_codes = get_languages()\n@@ -272,10 +274,12 @@ def get_language_from_path(path, strict=False):\n     if not regex_match:\n         return None\n     lang_code = regex_match[1]\n-    try:\n-        return get_supported_language_variant(lang_code, strict=strict)\n-    except LookupError:\n-        return None\n+    if lang_code:\n+        try:\n+            return get_supported_language_variant(lang_code, strict=strict)\n+        except LookupError:\n+            pass\n+    return None\n def get_language_from_request(request, check_path=False):\n     if check_path:\n         lang_code = get_language_from_path(request.path_info)\n", "normalized_occurrence": 1}
