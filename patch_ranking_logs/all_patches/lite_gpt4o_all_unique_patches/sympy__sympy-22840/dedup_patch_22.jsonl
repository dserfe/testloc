{"model_name_or_path": "agentless", "instance_id": "sympy__sympy-22840", "model_patch": "diff --git a/sympy/simplify/cse_main.py b/sympy/simplify/cse_main.py\nindex fa99708..805c867 100644\n--- a/sympy/simplify/cse_main.py\n+++ b/sympy/simplify/cse_main.py\n@@ -791,7 +791,7 @@ def cse(exprs, symbols=None, optimizations=None, postprocess=None,\n     temp = []\n     for e in exprs:\n         if isinstance(e, (Matrix, ImmutableMatrix)):\n-            temp.append(Tuple(*e.flat()))\n+            temp.append(e.as_explicit().tolist())\n         elif isinstance(e, (SparseMatrix, ImmutableSparseMatrix)):\n             temp.append(Tuple(*e.todok().items()))\n         else:\n@@ -832,7 +832,7 @@ def cse(exprs, symbols=None, optimizations=None, postprocess=None,\n     # Get the matrices back\n     for i, e in enumerate(exprs):\n         if isinstance(e, (Matrix, ImmutableMatrix)):\n-            reduced_exprs[i] = Matrix(e.rows, e.cols, reduced_exprs[i])\n+            reduced_exprs[i] = Matrix(reduced_exprs[i])\n             if isinstance(e, ImmutableMatrix):\n                 reduced_exprs[i] = reduced_exprs[i].as_immutable()\n         elif isinstance(e, (SparseMatrix, ImmutableSparseMatrix)):\n", "occurrence": 1, "normalized_patch": "diff --git a/sympy/simplify/cse_main.py b/sympy/simplify/cse_main.py\nindex d5cc8d7..b23722b 100644\n--- a/sympy/simplify/cse_main.py\n+++ b/sympy/simplify/cse_main.py\n@@ -314,7 +314,7 @@ def cse(exprs, symbols=None, optimizations=None, postprocess=None, order='canoni\n     temp = []\n     for e in exprs:\n         if isinstance(e, (Matrix, ImmutableMatrix)):\n-            temp.append(Tuple(*e.flat()))\n+            temp.append(e.as_explicit().tolist())\n         elif isinstance(e, (SparseMatrix, ImmutableSparseMatrix)):\n             temp.append(Tuple(*e.todok().items()))\n         else:\n@@ -339,7 +339,7 @@ def cse(exprs, symbols=None, optimizations=None, postprocess=None, order='canoni\n     reduced_exprs = [postprocess_for_cse(e, optimizations) for e in reduced_exprs]\n     for i, e in enumerate(exprs):\n         if isinstance(e, (Matrix, ImmutableMatrix)):\n-            reduced_exprs[i] = Matrix(e.rows, e.cols, reduced_exprs[i])\n+            reduced_exprs[i] = Matrix(reduced_exprs[i])\n             if isinstance(e, ImmutableMatrix):\n                 reduced_exprs[i] = reduced_exprs[i].as_immutable()\n         elif isinstance(e, (SparseMatrix, ImmutableSparseMatrix)):\n", "normalized_occurrence": 1}
