{"model_name_or_path": "agentless_claude", "instance_id": "astropy__astropy-7746", "model_patch": "diff --git a/astropy/wcs/wcs.py b/astropy/wcs/wcs.py\nindex 369cdd2..b6a1edb 100644\n--- a/astropy/wcs/wcs.py\n+++ b/astropy/wcs/wcs.py\n@@ -1218,6 +1218,10 @@ reduce these to 2 dimensions using the naxis kwarg.\n                 raise ValueError(\n                     \"Coordinate arrays are not broadcastable to each other\")\n \n+            # Handle empty arrays\n+            if any(x.size == 0 for x in axes):\n+                return [np.array([]) for _ in range(self.wcs.naxis)]\n+\n             xy = np.hstack([x.reshape((x.size, 1)) for x in axes])\n \n             if ra_dec_order and sky == 'input':\n", "occurrence": 1, "normalized_patch": "diff --git a/astropy/wcs/wcs.py b/astropy/wcs/wcs.py\nindex 3d9c35a..28340fe 100644\n--- a/astropy/wcs/wcs.py\n+++ b/astropy/wcs/wcs.py\n@@ -598,6 +598,8 @@ class WCS(WCSBase):\n                 axes = np.broadcast_arrays(*axes)\n             except ValueError:\n                 raise ValueError('Coordinate arrays are not broadcastable to each other')\n+            if any((x.size == 0 for x in axes)):\n+                return [np.array([]) for _ in range(self.wcs.naxis)]\n             xy = np.hstack([x.reshape((x.size, 1)) for x in axes])\n             if ra_dec_order and sky == 'input':\n                 xy = self._denormalize_sky(xy)\n", "normalized_occurrence": 1}
