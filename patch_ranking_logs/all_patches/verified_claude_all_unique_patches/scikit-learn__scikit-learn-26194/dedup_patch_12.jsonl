{"model_name_or_path": "agentless_claude", "instance_id": "scikit-learn__scikit-learn-26194", "model_patch": "diff --git a/sklearn/metrics/_ranking.py b/sklearn/metrics/_ranking.py\nindex 0841d1d..46972e4 100644\n--- a/sklearn/metrics/_ranking.py\n+++ b/sklearn/metrics/_ranking.py\n@@ -1083,7 +1083,15 @@ def roc_curve(\n     # to make sure that the curve starts at (0, 0)\n     tps = np.r_[0, tps]\n     fps = np.r_[0, fps]\n-    thresholds = np.r_[thresholds[0] + 1, thresholds]\n+    \n+    # For probability scores (when max score <= 1), use a threshold slightly larger\n+    # than the maximum score instead of adding 1\n+    if thresholds[0] <= 1:\n+        # Use 1.0 or a value slightly larger than max score, whichever is larger\n+        max_score = max(1.0, thresholds[0] + 0.001)\n+        thresholds = np.r_[max_score, thresholds]\n+    else:\n+        thresholds = np.r_[thresholds[0] + 1, thresholds]\n \n     if fps[-1] <= 0:\n         warnings.warn(\n", "occurrence": 1, "normalized_patch": "diff --git a/sklearn/metrics/_ranking.py b/sklearn/metrics/_ranking.py\nindex 9f6917e..5e29fbb 100644\n--- a/sklearn/metrics/_ranking.py\n+++ b/sklearn/metrics/_ranking.py\n@@ -191,7 +191,11 @@ def roc_curve(y_true, y_score, *, pos_label=None, sample_weight=None, drop_inter\n         thresholds = thresholds[optimal_idxs]\n     tps = np.r_[0, tps]\n     fps = np.r_[0, fps]\n-    thresholds = np.r_[thresholds[0] + 1, thresholds]\n+    if thresholds[0] <= 1:\n+        max_score = max(1.0, thresholds[0] + 0.001)\n+        thresholds = np.r_[max_score, thresholds]\n+    else:\n+        thresholds = np.r_[thresholds[0] + 1, thresholds]\n     if fps[-1] <= 0:\n         warnings.warn('No negative samples in y_true, false positive value should be meaningless', UndefinedMetricWarning)\n         fpr = np.repeat(np.nan, fps.shape)\n", "normalized_occurrence": 1}
