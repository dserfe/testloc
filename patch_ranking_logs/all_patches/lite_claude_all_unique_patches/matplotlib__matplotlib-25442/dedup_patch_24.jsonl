{"model_name_or_path": "agentless_claude", "instance_id": "matplotlib__matplotlib-25442", "model_patch": "diff --git a/lib/matplotlib/offsetbox.py b/lib/matplotlib/offsetbox.py\nindex db0cc2e..a06ab15 100644\n--- a/lib/matplotlib/offsetbox.py\n+++ b/lib/matplotlib/offsetbox.py\n@@ -1558,6 +1558,10 @@ class DraggableBase:\n \n     def disconnect(self):\n         \"\"\"Disconnect the callbacks.\"\"\"\n+        # Skip disconnecting if the reference artist no longer has a canvas\n+        if self.ref_artist.figure is None:\n+            self.cids = []\n+            return\n         for cid in self.cids:\n             self.canvas.mpl_disconnect(cid)\n         try:\n", "occurrence": 1, "normalized_patch": "diff --git a/lib/matplotlib/offsetbox.py b/lib/matplotlib/offsetbox.py\nindex f94319f..8a61967 100644\n--- a/lib/matplotlib/offsetbox.py\n+++ b/lib/matplotlib/offsetbox.py\n@@ -1309,6 +1309,9 @@ class DraggableBase:\n \n     def disconnect(self):\n         \"\"\"Disconnect the callbacks.\"\"\"\n+        if self.ref_artist.figure is None:\n+            self.cids = []\n+            return\n         for cid in self.cids:\n             self.canvas.mpl_disconnect(cid)\n         try:\n", "normalized_occurrence": 1}
