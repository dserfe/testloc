{"model_name_or_path": "agentless_claude", "instance_id": "django__django-11815", "model_patch": "diff --git a/django/db/migrations/writer.py b/django/db/migrations/writer.py\nindex 36f0ec3..5abc5aa 100644\n--- a/django/db/migrations/writer.py\n+++ b/django/db/migrations/writer.py\n@@ -125,6 +125,8 @@ class MigrationWriter:\n         self.migration = migration\n         self.include_header = include_header\n         self.needs_manual_porting = False\n+        # Register Enum serializer\n+        self.register_serializer(enum.Enum, EnumSerializer)\n \n     def as_string(self):\n         \"\"\"Return a string of the file contents.\"\"\"\n@@ -279,6 +281,21 @@ class MigrationWriter:\n         Serializer.unregister(type_)\n \n \n+class EnumSerializer(BaseSerializer):\n+    \"\"\"\n+    Serializes Enum objects by using their name rather than value.\n+    This ensures compatibility with translated enum values.\n+    \"\"\"\n+    def serialize(self):\n+        imports = [\"import enum\"]\n+        if self.value.__class__.__module__ != \"builtins\":\n+            enum_module = self.value.__class__.__module__\n+            enum_class = self.value.__class__.__name__\n+            imports.append(\"from %s import %s\" % (enum_module, enum_class))\n+        enum_class = self.value.__class__.__name__\n+        return \"%s['%s']\" % (enum_class, self.value.name), imports\n+\n+\n MIGRATION_HEADER_TEMPLATE = \"\"\"\\\n # Generated by Django %(version)s on %(timestamp)s\n \n", "occurrence": 1, "normalized_patch": "diff --git a/django/db/migrations/writer.py b/django/db/migrations/writer.py\nindex acf3688..088b054 100644\n--- a/django/db/migrations/writer.py\n+++ b/django/db/migrations/writer.py\n@@ -96,6 +96,7 @@ class MigrationWriter:\n         self.migration = migration\n         self.include_header = include_header\n         self.needs_manual_porting = False\n+        self.register_serializer(enum.Enum, EnumSerializer)\n     def as_string(self):\n         items = {'replaces_str': '', 'initial_str': ''}\n         imports = set()\n@@ -193,5 +194,14 @@ class MigrationWriter:\n     @classmethod\n     def unregister_serializer(cls, type_):\n         Serializer.unregister(type_)\n+class EnumSerializer(BaseSerializer):\n+    def serialize(self):\n+        imports = ['import enum']\n+        if self.value.__class__.__module__ != 'builtins':\n+            enum_module = self.value.__class__.__module__\n+            enum_class = self.value.__class__.__name__\n+            imports.append('from %s import %s' % (enum_module, enum_class))\n+        enum_class = self.value.__class__.__name__\n+        return (\"%s['%s']\" % (enum_class, self.value.name), imports)\n MIGRATION_HEADER_TEMPLATE = '# Generated by Django %(version)s on %(timestamp)s\\n\\n'\n MIGRATION_TEMPLATE = '%(migration_header)s%(imports)s\\n\\nclass Migration(migrations.Migration):\\n%(replaces_str)s%(initial_str)s\\n    dependencies = [\\n%(dependencies)s    ]\\n\\n    operations = [\\n%(operations)s    ]\\n'\n\\ No newline at end of file\n", "normalized_occurrence": 1}
