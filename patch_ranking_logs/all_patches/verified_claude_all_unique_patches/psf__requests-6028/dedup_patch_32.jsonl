{"model_name_or_path": "agentless_claude", "instance_id": "psf__requests-6028", "model_patch": "diff --git a/requests/adapters.py b/requests/adapters.py\nindex d47134b..fa2b7b5 100644\n--- a/requests/adapters.py\n+++ b/requests/adapters.py\n@@ -384,11 +384,25 @@ class HTTPAdapter(BaseAdapter):\n         :rtype: dict\n         \"\"\"\n         headers = {}\n-        username, password = get_auth_from_url(proxy)\n-\n-        if username:\n-            headers['Proxy-Authorization'] = _basic_auth_str(username,\n-                                                             password)\n+        \n+        # Check if proxy is a dictionary (supporting auth parameter)\n+        if isinstance(proxy, dict):\n+            proxy_url = proxy.get('http') or proxy.get('https')\n+            proxy_auth = proxy.get('auth')\n+            if proxy_auth:\n+                headers['Proxy-Authorization'] = _basic_auth_str(\n+                    proxy_auth[0], proxy_auth[1]\n+                )\n+                return headers\n+        else:\n+            proxy_url = proxy\n+\n+        # Fall back to parsing auth from URL\n+        if proxy_url:\n+            username, password = get_auth_from_url(proxy_url)\n+            if username:\n+                headers['Proxy-Authorization'] = _basic_auth_str(username,\n+                                                                 password)\n \n         return headers\n \n", "occurrence": 1, "normalized_patch": "diff --git a/requests/adapters.py b/requests/adapters.py\nindex 8bf110e..f133e1d 100644\n--- a/requests/adapters.py\n+++ b/requests/adapters.py\n@@ -155,9 +155,18 @@ class HTTPAdapter(BaseAdapter):\n         pass\n     def proxy_headers(self, proxy):\n         headers = {}\n-        username, password = get_auth_from_url(proxy)\n-        if username:\n-            headers['Proxy-Authorization'] = _basic_auth_str(username, password)\n+        if isinstance(proxy, dict):\n+            proxy_url = proxy.get('http') or proxy.get('https')\n+            proxy_auth = proxy.get('auth')\n+            if proxy_auth:\n+                headers['Proxy-Authorization'] = _basic_auth_str(proxy_auth[0], proxy_auth[1])\n+                return headers\n+        else:\n+            proxy_url = proxy\n+        if proxy_url:\n+            username, password = get_auth_from_url(proxy_url)\n+            if username:\n+                headers['Proxy-Authorization'] = _basic_auth_str(username, password)\n         return headers\n     def send(self, request, stream=False, timeout=None, verify=True, cert=None, proxies=None):\n         try:\n", "normalized_occurrence": 1}
