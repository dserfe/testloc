{"model_name_or_path": "agentless", "instance_id": "matplotlib__matplotlib-23987", "model_patch": "diff --git a/lib/matplotlib/figure.py b/lib/matplotlib/figure.py\nindex 71845c8..553f25e 100644\n--- a/lib/matplotlib/figure.py\n+++ b/lib/matplotlib/figure.py\n@@ -2577,8 +2577,8 @@ class Figure(FigureBase):\n         else:\n             raise ValueError(f\"Invalid value for 'layout': {layout!r}\")\n \n-        if self._check_layout_engines_compat(self._layout_engine,\n-                                             new_layout_engine):\n+        if new_layout_engine is None or self._check_layout_engines_compat(self._layout_engine,\n+                                                                          new_layout_engine):\n             self._layout_engine = new_layout_engine\n         else:\n             raise RuntimeError('Colorbar layout of new layout engine not '\n", "occurrence": 2, "normalized_patch": "diff --git a/lib/matplotlib/figure.py b/lib/matplotlib/figure.py\nindex 57abfc4..1d85921 100644\n--- a/lib/matplotlib/figure.py\n+++ b/lib/matplotlib/figure.py\n@@ -782,7 +782,7 @@ class Figure(FigureBase):\n             new_layout_engine = layout\n         else:\n             raise ValueError(f\"Invalid value for 'layout': {layout!r}\")\n-        if self._check_layout_engines_compat(self._layout_engine, new_layout_engine):\n+        if new_layout_engine is None or self._check_layout_engines_compat(self._layout_engine, new_layout_engine):\n             self._layout_engine = new_layout_engine\n         else:\n             raise RuntimeError('Colorbar layout of new layout engine not compatible with old engine, and a colorbar has been created.  Engine not changed.')\n", "normalized_occurrence": 3}
