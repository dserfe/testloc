{"model_name_or_path": "agentless_claude", "instance_id": "django__django-11797", "model_patch": "diff --git a/django/db/models/sql/query.py b/django/db/models/sql/query.py\nindex 0b52a54..8defce7 100644\n--- a/django/db/models/sql/query.py\n+++ b/django/db/models/sql/query.py\n@@ -1017,7 +1017,9 @@ class Query(BaseExpression):\n         clone.bump_prefix(query)\n         clone.subquery = True\n         # It's safe to drop ordering if the queryset isn't using slicing,\n-        # distinct(*fields) or select_for_update().\n+        # distinct(*fields) or select_for_update(). However, we must\n+        # not clear the group_by as that would change the meaning of\n+        # the query.\n         if (self.low_mark == 0 and self.high_mark is None and\n                 not self.distinct_fields and\n                 not self.select_for_update):\n@@ -1902,6 +1904,7 @@ class Query(BaseExpression):\n         \"\"\"\n         Remove any ordering settings. If 'force_empty' is True, there will be\n         no ordering in the resulting query (not even the model's default).\n+        Note: This only affects ORDER BY clause, not GROUP BY.\n         \"\"\"\n         self.order_by = ()\n         self.extra_order_by = ()\n", "occurrence": 1}
