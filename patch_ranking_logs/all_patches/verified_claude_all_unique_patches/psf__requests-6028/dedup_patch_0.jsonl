{"model_name_or_path": "agentless_claude", "instance_id": "psf__requests-6028", "model_patch": "diff --git a/requests/adapters.py b/requests/adapters.py\nindex d47134b..00c82fb 100644\n--- a/requests/adapters.py\n+++ b/requests/adapters.py\n@@ -386,9 +386,16 @@ class HTTPAdapter(BaseAdapter):\n         headers = {}\n         username, password = get_auth_from_url(proxy)\n \n-        if username:\n-            headers['Proxy-Authorization'] = _basic_auth_str(username,\n-                                                             password)\n+        if username and password:\n+            # Only add basic auth if both username and password are present\n+            headers['Proxy-Authorization'] = _basic_auth_str(username, password)\n+        elif ':' in proxy:\n+            # Handle cases where auth info might be in the URL's netloc\n+            parsed = urlparse(proxy)\n+            if '@' in parsed.netloc:\n+                netlog_auth = parsed.netloc.split('@')[0].split(':')\n+                if len(netlog_auth) == 2:\n+                    headers['Proxy-Authorization'] = _basic_auth_str(netlog_auth[0], netlog_auth[1])\n \n         return headers\n \n", "occurrence": 1, "normalized_patch": "diff --git a/requests/adapters.py b/requests/adapters.py\nindex 8bf110e..d9263ad 100644\n--- a/requests/adapters.py\n+++ b/requests/adapters.py\n@@ -156,8 +156,14 @@ class HTTPAdapter(BaseAdapter):\n     def proxy_headers(self, proxy):\n         headers = {}\n         username, password = get_auth_from_url(proxy)\n-        if username:\n+        if username and password:\n             headers['Proxy-Authorization'] = _basic_auth_str(username, password)\n+        elif ':' in proxy:\n+            parsed = urlparse(proxy)\n+            if '@' in parsed.netloc:\n+                netlog_auth = parsed.netloc.split('@')[0].split(':')\n+                if len(netlog_auth) == 2:\n+                    headers['Proxy-Authorization'] = _basic_auth_str(netlog_auth[0], netlog_auth[1])\n         return headers\n     def send(self, request, stream=False, timeout=None, verify=True, cert=None, proxies=None):\n         try:\n", "normalized_occurrence": 1}
