{"model_name_or_path": "agentless_claude", "instance_id": "django__django-14730", "model_patch": "diff --git a/django/db/models/fields/related.py b/django/db/models/fields/related.py\nindex d685b12..9161e6f 100644\n--- a/django/db/models/fields/related.py\n+++ b/django/db/models/fields/related.py\n@@ -1207,6 +1207,17 @@ class ManyToManyField(RelatedField):\n         self.db_table = db_table\n         self.swappable = swappable\n \n+    def _check_related_name_symmetrical(self, **kwargs):\n+        if self.remote_field.related_name and self.remote_field.symmetrical:\n+            return [\n+                checks.Error(\n+                    'related_name cannot be set on a symmetrical ManyToManyField.',\n+                    obj=self,\n+                    id='fields.E345',\n+                )\n+            ]\n+        return []\n+\n     def check(self, **kwargs):\n         return [\n             *super().check(**kwargs),\n@@ -1214,6 +1225,7 @@ class ManyToManyField(RelatedField):\n             *self._check_relationship_model(**kwargs),\n             *self._check_ignored_options(**kwargs),\n             *self._check_table_uniqueness(**kwargs),\n+            *self._check_related_name_symmetrical(**kwargs),\n         ]\n \n     def _check_unique(self, **kwargs):\n@@ -1719,4 +1731,4 @@ class ManyToManyField(RelatedField):\n         return None\n \n     def db_parameters(self, connection):\n-        return {\"type\": None, \"check\": None}\n+        return {\"type\": None, \"check\": None}\n", "occurrence": 1, "normalized_patch": "diff --git a/django/db/models/fields/related.py b/django/db/models/fields/related.py\nindex 6fd437b..c204d5e 100644\n--- a/django/db/models/fields/related.py\n+++ b/django/db/models/fields/related.py\n@@ -534,8 +534,12 @@ class ManyToManyField(RelatedField):\n         super().__init__(related_name=related_name, related_query_name=related_query_name, limit_choices_to=limit_choices_to, **kwargs)\n         self.db_table = db_table\n         self.swappable = swappable\n+    def _check_related_name_symmetrical(self, **kwargs):\n+        if self.remote_field.related_name and self.remote_field.symmetrical:\n+            return [checks.Error('related_name cannot be set on a symmetrical ManyToManyField.', obj=self, id='fields.E345')]\n+        return []\n     def check(self, **kwargs):\n-        return [*super().check(**kwargs), *self._check_unique(**kwargs), *self._check_relationship_model(**kwargs), *self._check_ignored_options(**kwargs), *self._check_table_uniqueness(**kwargs)]\n+        return [*super().check(**kwargs), *self._check_unique(**kwargs), *self._check_relationship_model(**kwargs), *self._check_ignored_options(**kwargs), *self._check_table_uniqueness(**kwargs), *self._check_related_name_symmetrical(**kwargs)]\n     def _check_unique(self, **kwargs):\n         if self.unique:\n             return [checks.Error('ManyToManyFields cannot be unique.', obj=self, id='fields.E330')]\n", "normalized_occurrence": 1}
