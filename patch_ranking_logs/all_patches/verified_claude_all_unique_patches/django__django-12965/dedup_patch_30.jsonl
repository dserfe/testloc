{"model_name_or_path": "agentless_claude", "instance_id": "django__django-12965", "model_patch": "diff --git a/django/db/models/sql/compiler.py b/django/db/models/sql/compiler.py\nindex 7c860dc..c7f33a0 100644\n--- a/django/db/models/sql/compiler.py\n+++ b/django/db/models/sql/compiler.py\n@@ -1423,6 +1423,10 @@ class SQLDeleteCompiler(SQLCompiler):\n         Create the SQL for this query. Return the SQL string and list of\n         parameters.\n         \"\"\"\n+        # For single table delete without any where clause (Model.objects.all().delete()),\n+        # use a simple DELETE FROM query for better performance and MySQL lock compatibility\n+        if self.single_alias and not self.query.where:\n+            return self._as_sql(self.query)\n         if self.single_alias:\n             return self._as_sql(self.query)\n         innerq = self.query.clone()\n", "occurrence": 1, "normalized_patch": "diff --git a/django/db/models/sql/compiler.py b/django/db/models/sql/compiler.py\nindex 8178df0..4f315b3 100644\n--- a/django/db/models/sql/compiler.py\n+++ b/django/db/models/sql/compiler.py\n@@ -798,6 +798,8 @@ class SQLDeleteCompiler(SQLCompiler):\n             result.append('WHERE %s' % where)\n         return (' '.join(result), tuple(params))\n     def as_sql(self):\n+        if self.single_alias and (not self.query.where):\n+            return self._as_sql(self.query)\n         if self.single_alias:\n             return self._as_sql(self.query)\n         innerq = self.query.clone()\n", "normalized_occurrence": 5}
