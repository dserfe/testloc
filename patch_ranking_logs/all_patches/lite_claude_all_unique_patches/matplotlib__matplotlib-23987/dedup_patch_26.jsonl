{"model_name_or_path": "agentless_claude", "instance_id": "matplotlib__matplotlib-23987", "model_patch": "diff --git a/lib/matplotlib/layout_engine.py b/lib/matplotlib/layout_engine.py\nindex 2a777f2..42e835c 100644\n--- a/lib/matplotlib/layout_engine.py\n+++ b/lib/matplotlib/layout_engine.py\n@@ -196,8 +196,14 @@ class ConstrainedLayoutEngine(LayoutEngine):\n     :doc:`/tutorials/intermediate/constrainedlayout_guide` for details.\n     \"\"\"\n \n-    _adjust_compatible = False\n-    _colorbar_gridspec = False\n+    def __init__(self, **kwargs):\n+        # If constrained_layout is explicitly set to False, make it adjust_compatible\n+        if kwargs.get('constrained_layout') is False:\n+            self._adjust_compatible = True\n+        else:\n+            self._adjust_compatible = False\n+        self._colorbar_gridspec = False\n+        super().__init__(**kwargs)\n \n     def __init__(self, *, h_pad=None, w_pad=None,\n                  hspace=None, wspace=None, rect=(0, 0, 1, 1),\n", "occurrence": 1, "normalized_patch": "diff --git a/lib/matplotlib/layout_engine.py b/lib/matplotlib/layout_engine.py\nindex 2879487..aae207d 100644\n--- a/lib/matplotlib/layout_engine.py\n+++ b/lib/matplotlib/layout_engine.py\n@@ -55,8 +55,13 @@ class TightLayoutEngine(LayoutEngine):\n             if locals()[td] is not None:\n                 self._params[td] = locals()[td]\n class ConstrainedLayoutEngine(LayoutEngine):\n-    _adjust_compatible = False\n-    _colorbar_gridspec = False\n+    def __init__(self, **kwargs):\n+        if kwargs.get('constrained_layout') is False:\n+            self._adjust_compatible = True\n+        else:\n+            self._adjust_compatible = False\n+        self._colorbar_gridspec = False\n+        super().__init__(**kwargs)\n     def __init__(self, *, h_pad=None, w_pad=None, hspace=None, wspace=None, rect=(0, 0, 1, 1), compress=False, **kwargs):\n         super().__init__(**kwargs)\n         self.set(w_pad=mpl.rcParams['figure.constrained_layout.w_pad'], h_pad=mpl.rcParams['figure.constrained_layout.h_pad'], wspace=mpl.rcParams['figure.constrained_layout.wspace'], hspace=mpl.rcParams['figure.constrained_layout.hspace'], rect=(0, 0, 1, 1))\n", "normalized_occurrence": 1}
