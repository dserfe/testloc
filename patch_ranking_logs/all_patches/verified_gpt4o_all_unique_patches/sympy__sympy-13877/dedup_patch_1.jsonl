{"model_name_or_path": "agentless", "instance_id": "sympy__sympy-13877", "model_patch": "diff --git a/sympy/matrices/matrices.py b/sympy/matrices/matrices.py\nindex 3216a40..15a7fb9 100644\n--- a/sympy/matrices/matrices.py\n+++ b/sympy/matrices/matrices.py\n@@ -213,7 +213,14 @@ class MatrixDeterminant(MatrixCommon):\n \n             return sign*bareiss(self._new(mat.rows - 1, mat.cols - 1, entry), pivot_val)\n \n-        return cancel(bareiss(self))\n+        try:\n+            return cancel(bareiss(self))\n+        except TypeError as e:\n+            # Fallback to Berkowitz algorithm for symbolic entries\n+            if \"Invalid NaN comparison\" in str(e):\n+                return self._eval_det_berkowitz()\n+            else:\n+                raise e\n \n     def _eval_det_berkowitz(self):\n         \"\"\" Use the Berkowitz algorithm to compute the determinant.\"\"\"\n", "occurrence": 1, "normalized_patch": "diff --git a/sympy/matrices/matrices.py b/sympy/matrices/matrices.py\nindex be48f5f..15a3883 100644\n--- a/sympy/matrices/matrices.py\n+++ b/sympy/matrices/matrices.py\n@@ -86,7 +86,13 @@ class MatrixDeterminant(MatrixCommon):\n                     cancel(ret)\n                 return ret\n             return sign * bareiss(self._new(mat.rows - 1, mat.cols - 1, entry), pivot_val)\n-        return cancel(bareiss(self))\n+        try:\n+            return cancel(bareiss(self))\n+        except TypeError as e:\n+            if 'Invalid NaN comparison' in str(e):\n+                return self._eval_det_berkowitz()\n+            else:\n+                raise e\n     def _eval_det_berkowitz(self):\n         berk_vector = self._eval_berkowitz_vector()\n         return (-1) ** (len(berk_vector) - 1) * berk_vector[-1]\n", "normalized_occurrence": 1}
