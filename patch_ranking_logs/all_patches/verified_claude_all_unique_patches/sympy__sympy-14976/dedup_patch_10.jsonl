{"model_name_or_path": "agentless_claude", "instance_id": "sympy__sympy-14976", "model_patch": "diff --git a/sympy/utilities/lambdify.py b/sympy/utilities/lambdify.py\nindex 48d6783..1b46f07 100644\n--- a/sympy/utilities/lambdify.py\n+++ b/sympy/utilities/lambdify.py\n@@ -397,7 +397,11 @@ def lambdify(args, expr, modules=None, printer=None, use_imps=True,\n \n     if printer is None:\n         if _module_present('mpmath', namespaces):\n-            from sympy.printing.pycode import MpmathPrinter as Printer\n+            from sympy.printing.pycode import MpmathPrinter\n+            class MpmathPrinterWithRationals(MpmathPrinter):\n+                def _print_Rational(self, expr):\n+                    return 'mpmath.mpf(%r) / mpmath.mpf(%r)' % (expr.p, expr.q)\n+            Printer = MpmathPrinterWithRationals\n         elif _module_present('numpy', namespaces):\n             from sympy.printing.pycode import NumPyPrinter as Printer\n         elif _module_present('numexpr', namespaces):\n", "occurrence": 1, "normalized_patch": "diff --git a/sympy/utilities/lambdify.py b/sympy/utilities/lambdify.py\nindex 9997e01..d061038 100644\n--- a/sympy/utilities/lambdify.py\n+++ b/sympy/utilities/lambdify.py\n@@ -87,7 +87,11 @@ def lambdify(args, expr, modules=None, printer=None, use_imps=True, dummify=Fals\n             namespace.update({str(term): term})\n     if printer is None:\n         if _module_present('mpmath', namespaces):\n-            from sympy.printing.pycode import MpmathPrinter as Printer\n+            from sympy.printing.pycode import MpmathPrinter\n+            class MpmathPrinterWithRationals(MpmathPrinter):\n+                def _print_Rational(self, expr):\n+                    return 'mpmath.mpf(%r) / mpmath.mpf(%r)' % (expr.p, expr.q)\n+            Printer = MpmathPrinterWithRationals\n         elif _module_present('numpy', namespaces):\n             from sympy.printing.pycode import NumPyPrinter as Printer\n         elif _module_present('numexpr', namespaces):\n", "normalized_occurrence": 1}
