{"model_name_or_path": "agentless", "instance_id": "mwaskom__seaborn-2848", "model_patch": "diff --git a/seaborn/axisgrid.py b/seaborn/axisgrid.py\nindex 21c0562..79efe85 100644\n--- a/seaborn/axisgrid.py\n+++ b/seaborn/axisgrid.py\n@@ -1328,10 +1328,18 @@ class PairGrid(Grid):\n             called ``color`` and  ``label``.\n \n         \"\"\"\n+        if 'hue' in kwargs:\n+            self._hue_var = '_map_hue'\n+            self.data['_map_hue'] = kwargs.pop('hue')\n+\n         row_indices, col_indices = np.indices(self.axes.shape)\n         indices = zip(row_indices.flat, col_indices.flat)\n         self._map_bivariate(func, indices, **kwargs)\n \n+        if '_map_hue' in self.data:\n+            self.data.pop('_map_hue')\n+            self._hue_var = None\n+\n         return self\n \n     def map_lower(self, func, **kwargs):\n", "occurrence": 1, "normalized_patch": "diff --git a/seaborn/axisgrid.py b/seaborn/axisgrid.py\nindex 0807052..0e584f0 100644\n--- a/seaborn/axisgrid.py\n+++ b/seaborn/axisgrid.py\n@@ -605,9 +605,15 @@ class PairGrid(Grid):\n             utils.despine(fig=fig)\n         self.tight_layout(pad=layout_pad)\n     def map(self, func, **kwargs):\n+        if 'hue' in kwargs:\n+            self._hue_var = '_map_hue'\n+            self.data['_map_hue'] = kwargs.pop('hue')\n         row_indices, col_indices = np.indices(self.axes.shape)\n         indices = zip(row_indices.flat, col_indices.flat)\n         self._map_bivariate(func, indices, **kwargs)\n+        if '_map_hue' in self.data:\n+            self.data.pop('_map_hue')\n+            self._hue_var = None\n         return self\n     def map_lower(self, func, **kwargs):\n         indices = zip(*np.tril_indices_from(self.axes, -1))\n", "normalized_occurrence": 1}
